<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Docker æŒ‡å— | Lorain&#39;s ä¸ªäººä¸»é¡µğŸ–Œ</title>
    <meta name="generator" content="VuePress 1.5.2">
    <link rel="icon" href="/blog/base/hd-img.jpg">
    <link rel="manifest" href="/blog/manifest.json">
    <link rel="apple-touch-icon" href="/blog/base/hd-img.jpg">
    <meta name="description" content="å±±ä¸­æ¨—æ å¹´å¹´åœ¨ & çœ‹å°½è¥¿é£æœ¨æ§¿èŠ±">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta http-quiv="pragma" cotent="no-cache">
    <meta http-quiv="pragma" cotent="no-cache,must-revalidate">
    <meta http-quiv="expires" cotent="0">
    <link rel="preload" href="/blog/assets/css/0.styles.579a9854.css" as="style"><link rel="preload" href="/blog/assets/js/app.25414947.js" as="script"><link rel="preload" href="/blog/assets/js/3.ab657a59.js" as="script"><link rel="preload" href="/blog/assets/js/17.5f2beb7f.js" as="script"><link rel="preload" href="/blog/assets/js/4.022282fe.js" as="script"><link rel="prefetch" href="/blog/assets/js/10.15efb885.js"><link rel="prefetch" href="/blog/assets/js/11.b69736a7.js"><link rel="prefetch" href="/blog/assets/js/12.1e4a5a90.js"><link rel="prefetch" href="/blog/assets/js/13.a0e2552d.js"><link rel="prefetch" href="/blog/assets/js/14.db5c8151.js"><link rel="prefetch" href="/blog/assets/js/15.a2f176cb.js"><link rel="prefetch" href="/blog/assets/js/16.5298f88a.js"><link rel="prefetch" href="/blog/assets/js/18.e510d28d.js"><link rel="prefetch" href="/blog/assets/js/19.53886023.js"><link rel="prefetch" href="/blog/assets/js/20.63c552fe.js"><link rel="prefetch" href="/blog/assets/js/21.67e51d39.js"><link rel="prefetch" href="/blog/assets/js/22.64fcf1a3.js"><link rel="prefetch" href="/blog/assets/js/23.c7251380.js"><link rel="prefetch" href="/blog/assets/js/24.5ba591b0.js"><link rel="prefetch" href="/blog/assets/js/25.096364ce.js"><link rel="prefetch" href="/blog/assets/js/26.0ccf51ed.js"><link rel="prefetch" href="/blog/assets/js/27.8edf20d3.js"><link rel="prefetch" href="/blog/assets/js/28.f04b9341.js"><link rel="prefetch" href="/blog/assets/js/29.c8add927.js"><link rel="prefetch" href="/blog/assets/js/30.1aef2e5e.js"><link rel="prefetch" href="/blog/assets/js/31.1abd6355.js"><link rel="prefetch" href="/blog/assets/js/32.03df97b0.js"><link rel="prefetch" href="/blog/assets/js/33.c00a706c.js"><link rel="prefetch" href="/blog/assets/js/34.2f847376.js"><link rel="prefetch" href="/blog/assets/js/35.63347724.js"><link rel="prefetch" href="/blog/assets/js/36.9fdc020c.js"><link rel="prefetch" href="/blog/assets/js/37.3392c04b.js"><link rel="prefetch" href="/blog/assets/js/38.ade4c9de.js"><link rel="prefetch" href="/blog/assets/js/39.6aec4626.js"><link rel="prefetch" href="/blog/assets/js/40.9c723d93.js"><link rel="prefetch" href="/blog/assets/js/5.904e5833.js"><link rel="prefetch" href="/blog/assets/js/6.2426cfb9.js"><link rel="prefetch" href="/blog/assets/js/7.7194594b.js"><link rel="prefetch" href="/blog/assets/js/8.e15df7e7.js"><link rel="prefetch" href="/blog/assets/js/9.3ff9262b.js"><link rel="prefetch" href="/blog/assets/js/vendors~docsearch.21b1897d.js">
    <link rel="stylesheet" href="/blog/assets/css/0.styles.579a9854.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/blog/" class="home-link router-link-active"><!----> <span class="site-name">Lorain's ä¸ªäººä¸»é¡µğŸ–Œ</span></a> <div class="links"><form id="search-form" role="search" class="algolia-search-wrapper search-box"><input id="algolia-search-input" class="search-query"></form> <nav class="nav-links can-hide"><div class="nav-item"><a href="/blog/skills/" class="nav-link router-link-active">
  ğŸ“œæŠ€æœ¯è¿›é˜¶
</a></div><div class="nav-item"><a href="/blog/algorithm/" class="nav-link">
  ğŸ“Šç®—æ³•ç›¸å…³
</a></div><div class="nav-item"><a href="/blog/life/" class="nav-link">
  ğŸ€è®°å½•ç”Ÿæ´»
</a></div><div class="nav-item"><a href="https://github.com/lorainwings" target="_blank" rel="noopener noreferrer" class="nav-link external">
  â­ï¸Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/blog/skills/" class="nav-link router-link-active">
  ğŸ“œæŠ€æœ¯è¿›é˜¶
</a></div><div class="nav-item"><a href="/blog/algorithm/" class="nav-link">
  ğŸ“Šç®—æ³•ç›¸å…³
</a></div><div class="nav-item"><a href="/blog/life/" class="nav-link">
  ğŸ€è®°å½•ç”Ÿæ´»
</a></div><div class="nav-item"><a href="https://github.com/lorainwings" target="_blank" rel="noopener noreferrer" class="nav-link external">
  â­ï¸Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Client &amp; Side</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Build &amp; Tools</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Design &amp; Patterns</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Server &amp; Side</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/skills/Crontab.html" class="sidebar-link">Crontab</a></li><li><a href="/blog/skills/æŸ¥çœ‹æ—¥å¿—.html" class="sidebar-link">æŸ¥çœ‹æ—¥å¿—</a></li><li><a href="/blog/skills/DockeræŒ‡å—.html" class="active sidebar-link">Docker æŒ‡å—</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/skills/DockeræŒ‡å—.html#æ¦‚å¿µ-ä½œç”¨-ç»„æˆ" class="sidebar-link">æ¦‚å¿µ &amp; ä½œç”¨ &amp; ç»„æˆ</a></li><li class="sidebar-sub-header"><a href="/blog/skills/DockeræŒ‡å—.html#è¿è¡Œç¯å¢ƒ" class="sidebar-link">è¿è¡Œç¯å¢ƒ</a></li><li class="sidebar-sub-header"><a href="/blog/skills/DockeræŒ‡å—.html#æ“ä½œé•œåƒ" class="sidebar-link">æ“ä½œé•œåƒ</a></li><li class="sidebar-sub-header"><a href="/blog/skills/DockeræŒ‡å—.html#ä½¿ç”¨å®¹å™¨" class="sidebar-link">ä½¿ç”¨å®¹å™¨</a></li><li class="sidebar-sub-header"><a href="/blog/skills/DockeræŒ‡å—.html#dockerfile" class="sidebar-link">Dockerfile</a></li><li class="sidebar-sub-header"><a href="/blog/skills/DockeræŒ‡å—.html#ç»„åˆåº”ç”¨" class="sidebar-link">ç»„åˆåº”ç”¨</a></li></ul></li><li><a href="/blog/skills/DockerForV2ray.html" class="sidebar-link">Docker For V2ray</a></li><li><a href="/blog/skills/Nginxé…ç½®æµ…æ.html" class="sidebar-link">Nginx é…ç½®æµ…æ</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="docker-æŒ‡å—"><a href="#docker-æŒ‡å—" class="header-anchor">#</a> Docker æŒ‡å—</h1> <p>æœ€è¿‘é‡æ–°å­¦ä¹ äº†ä¸€é docker ç›¸å…³çš„æ¦‚å¿µå’ŒçŸ¥è¯†, åœ¨æ­¤è®°å½•ç›¸å…³çŸ¥è¯†ç‚¹ä»¥ä½œä¸ºå¤‡å¿˜</p> <h2 id="æ¦‚å¿µ-ä½œç”¨-ç»„æˆ"><a href="#æ¦‚å¿µ-ä½œç”¨-ç»„æˆ" class="header-anchor">#</a> æ¦‚å¿µ &amp; ä½œç”¨ &amp; ç»„æˆ</h2> <h3 id="docker-æ¦‚å¿µ"><a href="#docker-æ¦‚å¿µ" class="header-anchor">#</a> Docker æ¦‚å¿µ</h3> <div class="language-æ¦‚å¿µ extra-class"><pre class="language-text"><code>dockeræ˜¯LXC(Linuxå®¹å™¨è™šæ‹ŸåŒ–)çš„äº§ç‰©, ä¸ºäº†æå‡é›†æˆç¯å¢ƒçš„éƒ¨ç½²ä¾¿åˆ©æ€§è€Œç”Ÿ, å°†è½¯ä»¶æ‰“åŒ…æˆæ ‡å‡†åŒ–å•å…ƒï¼Œä»¥ç”¨äºå¼€å‘ã€äº¤ä»˜å’Œéƒ¨ç½²;
</code></pre></div><h3 id="docker-çš„ä½œç”¨"><a href="#docker-çš„ä½œç”¨" class="header-anchor">#</a> Docker çš„ä½œç”¨</h3> <ul><li>å¼€å‘è€…èƒ½å¤Ÿä½¿ç”¨ Docker åœ¨æœ¬åœ°ç¼–å†™ä»£ç å¹¶é€šè¿‡å®¹å™¨ä¸å…¶ä»–åŒäº‹å…±äº«ä»–ä»¬çš„å·¥ä½œã€‚</li> <li>ä»–ä»¬èƒ½å¤Ÿä½¿ç”¨ Docker å°†ç¼–å†™å¥½çš„ç¨‹åºæ¨é€è‡³æµ‹è¯•ç¯å¢ƒè¿›è¡Œè‡ªåŠ¨åŒ–æµ‹è¯•æˆ–æ˜¯äººå·¥æµ‹è¯•ã€‚</li> <li>å½“å‡ºç° Bugs æ—¶ï¼Œå¼€å‘è€…å¯ä»¥åœ¨å¼€å‘ç¯å¢ƒä¸­ä¿®å¤å®ƒä»¬ï¼Œå¹¶å¾ˆå¿«çš„é‡æ–°éƒ¨ç½²åˆ°æµ‹è¯•ç¯å¢ƒä¸­ã€‚</li> <li>åœ¨æµ‹è¯•å®Œæˆåï¼Œéƒ¨ç½²è£…æœ‰åº”ç”¨ç¨‹åºçš„é•œåƒå°±èƒ½å®Œæˆç”Ÿäº§ç¯å¢ƒçš„å‘å¸ƒã€‚</li></ul> <h3 id="docker-çš„ç»„æˆ"><a href="#docker-çš„ç»„æˆ" class="header-anchor">#</a> Docker çš„ç»„æˆ</h3> <ul><li>é•œåƒ(images)</li> <li>å®¹å™¨(container)</li> <li>ç½‘ç»œ(network)</li> <li>æ•°æ®å·(volume)</li></ul> <h2 id="è¿è¡Œç¯å¢ƒ"><a href="#è¿è¡Œç¯å¢ƒ" class="header-anchor">#</a> è¿è¡Œç¯å¢ƒ</h2> <p>æ­å»º docker çš„è¿è¡Œç¯å¢ƒä¸»è¦åŒ…æ‹¬ä»¥ä¸‹å‡ ä¸ªéƒ¨åˆ†:</p> <ul><li>å®‰è£… docker</li> <li>é… docker åŠ é€Ÿé•œåƒæº</li></ul> <h3 id="å®‰è£…-docker"><a href="#å®‰è£…-docker" class="header-anchor">#</a> å®‰è£… docker</h3> <p>åœ¨ Windows å’Œ Mac ä¸­å®‰è£… Docker, é€šè¿‡ä¸‹é¢é“¾æ¥ç›´æ¥å®‰è£…æ¡Œé¢åº”ç”¨, éå¸¸ç®€å•</p> <ul><li><a href="https://store.docker.com/editions/community/docker-ce-desktop-windows" target="_blank" rel="noopener noreferrer">Docker for Windows<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="https://store.docker.com/editions/community/docker-ce-desktop-mac" target="_blank" rel="noopener noreferrer">Docker for Mac<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul> <p>åœ¨ Linux ç³»ç»Ÿä¸­å®‰è£… Docker, é€šè¿‡ä¸‹é¢å‘½ä»¤å³å¯</p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token comment"># CentOS</span>
  <span class="token function">sudo</span> yum <span class="token function">install</span> yum-utils device-mapper-persistent-data lvm2
 
  <span class="token function">sudo</span> yum-config-manager --add-repo https://download.docker.com/linux/centos/docker-ce.repo
  <span class="token function">sudo</span> yum <span class="token function">install</span> docker-ce
 
  <span class="token function">sudo</span> systemctl <span class="token builtin class-name">enable</span> docker
  <span class="token function">sudo</span> systemctl start docker
</code></pre></div><div class="language-sh extra-class"><pre class="language-sh"><code><span class="token comment"># Debian</span>
  <span class="token function">sudo</span> <span class="token function">apt-get</span> <span class="token function">install</span> apt-transport-https ca-certificates <span class="token function">curl</span> gnupg2 software-properties-common
 
  <span class="token function">curl</span> -fsSL https://download.docker.com/linux/debian/gpg <span class="token operator">|</span> <span class="token function">sudo</span> apt-key <span class="token function">add</span> -
  <span class="token function">sudo</span> add-apt-repository <span class="token string">&quot;deb [arch=amd64] https://download.docker.com/linux/debian  (lsb_release -cs) stable&quot;</span>
  <span class="token function">sudo</span> <span class="token function">apt-get</span> update
  <span class="token function">sudo</span> <span class="token function">apt-get</span> <span class="token function">install</span> docker-ce
 
  <span class="token function">sudo</span> systemctl <span class="token builtin class-name">enable</span> docker
  <span class="token function">sudo</span> systemctl start docker
</code></pre></div><h3 id="é…ç½®-docker-åŠ é€Ÿé•œåƒæº"><a href="#é…ç½®-docker-åŠ é€Ÿé•œåƒæº" class="header-anchor">#</a> é…ç½® docker åŠ é€Ÿé•œåƒæº</h3> <p>åœ¨ Linux ç¯å¢ƒä¸‹ï¼Œé€šè¿‡ä¿®æ”¹ /etc/docker/daemon.json ( å¦‚æœæ–‡ä»¶ä¸å­˜åœ¨ï¼Œéœ€è¦è‡ªå·±åˆ›å»º ), å›½å†…åŠ é€Ÿé•œåƒæºä¼—å¤š, ç¬”è€…æ­¤å¤„ä½¿ç”¨äº† ustc å’Œ 163 çš„é•œåƒæº</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;registry-mirrors&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token string">&quot;https://docker.mirrors.ustc.edu.cn&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;https://hub-mirror.c.163.com&quot;</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><p>åœ¨ Macos å’Œ Windows çš„ desktop æ¡Œé¢ç«¯, éœ€è¦æ‰“å¼€ç¼–è¾‘é…ç½®, å¦‚ä¸‹å›¾åŠ å…¥é…ç½®å³å¯</p> <p><img src="http://ww1.sinaimg.cn/large/715b1061ly1gg9b3nuhkyj21ls10oq7r.jpg" alt="dockeré•œåƒæºé…ç½®"></p> <h2 id="æ“ä½œé•œåƒ"><a href="#æ“ä½œé•œåƒ" class="header-anchor">#</a> æ“ä½œé•œåƒ</h2> <p>ä¸€èˆ¬è·å–é•œåƒçš„é€”å¾„éƒ½æ˜¯ä»å®˜æ–¹çš„é•œåƒä»“åº“ä¸­è·å¾—, é•œåƒä»“åº“ç±»ä¼¼äº(github), æ­¤å¤„è®°å½•æ“ä½œé•œåƒå¸¸ç”¨çš„å‘½ä»¤</p> <p><strong>è·å–é•œåƒ</strong>: <code>docker pull [name/tag/id]</code></p> <div class="language-sh extra-class"><pre class="language-sh"><code>docker pull ubuntu
</code></pre></div><p><strong>æŸ¥çœ‹æœ¬åœ°é•œåƒ</strong>: <code>docker images</code></p> <div class="language-sh extra-class"><pre class="language-sh"><code>docker images
</code></pre></div><p><strong>æœç´¢é•œåƒ</strong>: <code>docker search [name/tag/id]</code></p> <div class="language-sh extra-class"><pre class="language-sh"><code>docker search ubuntu
</code></pre></div><p><strong>æŸ¥çœ‹é•œåƒè¯¦ç»†ä¿¡æ¯</strong>: <code>docker inspect [name/tag/id]</code></p> <div class="language-sh extra-class"><pre class="language-sh"><code>docker inspect redis:4.0
</code></pre></div><p><strong>åˆ é™¤æœ¬åœ°é•œåƒ</strong>: <code>docker rmi [name/tag/id]</code></p> <div class="language-sh extra-class"><pre class="language-sh"><code>docker rmi ubuntu:latest
</code></pre></div><h2 id="ä½¿ç”¨å®¹å™¨"><a href="#ä½¿ç”¨å®¹å™¨" class="header-anchor">#</a> ä½¿ç”¨å®¹å™¨</h2> <p>å®¹å™¨æ˜¯åŸºäºå®¹å™¨æŠ€æœ¯æ‰€å»ºç«‹å’Œè¿è¡Œçš„è½»é‡çº§åº”ç”¨è¿è¡Œç¯å¢ƒ,åœ¨ Docker ä¸­ï¼Œå®¹å™¨ç®—æ˜¯æœ€æ ¸å¿ƒçš„éƒ¨åˆ†, æ­¤å¤„åˆ†ä¸ºä»¥ä¸‹ä¸‰éƒ¨åˆ†æ¥è®°å½•:</p> <ul><li>æ“ä½œå‘½ä»¤</li> <li>æ•°æ®ç®¡ç†</li> <li>ä½¿ç”¨ç½‘ç»œ</li></ul> <h3 id="æ“ä½œå‘½ä»¤"><a href="#æ“ä½œå‘½ä»¤" class="header-anchor">#</a> æ“ä½œå‘½ä»¤</h3> <p><strong>åˆ›å»ºå®¹å™¨</strong>: <code>docker create [name/tag/id]</code></p> <div class="language-sh extra-class"><pre class="language-sh"><code>docker create nginx:1.12
</code></pre></div><p><strong>å¯åŠ¨å®¹å™¨</strong>: <code>docker start nginx</code></p> <div class="language-sh extra-class"><pre class="language-sh"><code>docker start nginx
</code></pre></div><p><strong>åˆ›å»ºå¹¶å¯åŠ¨</strong>: <code>docker run --name [name] -d [name/tag/id]</code></p> <div class="language-sh extra-class"><pre class="language-sh"><code>docker run --name nginx -d nginx:1.12
</code></pre></div><p><strong>æŸ¥çœ‹å®¹å™¨</strong>: <code>docker ps</code></p> <div class="language-sh extra-class"><pre class="language-sh"><code>docker <span class="token function">ps</span>

<span class="token comment">#æŸ¥çœ‹å…¨éƒ¨å®¹å™¨</span>
docker <span class="token function">ps</span> -a
</code></pre></div><p><strong>åœæ­¢å®¹å™¨</strong>: <code>docker stop [name/tag/id]</code></p> <div class="language-sh extra-class"><pre class="language-sh"><code>docker stop nginx
</code></pre></div><p><strong>åˆ é™¤å®¹å™¨</strong>: <code>docker rm [name/tag/id]</code></p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token comment"># åˆ é™¤æœªè¿è¡Œçš„å®¹å™¨</span>
docker <span class="token function">rm</span> nginx

<span class="token comment"># åˆ é™¤ä»»ä½•çŠ¶æ€çš„å®¹å™¨</span>
docker <span class="token function">rm</span> nginx -f
</code></pre></div><p><strong>è¿›å…¥å®¹å™¨</strong>: <code>docker exec [name/tag/id] [å‘½ä»¤]</code></p> <div class="language-sh extra-class"><pre class="language-sh"><code>docker <span class="token builtin class-name">exec</span> nginx <span class="token function">more</span> /etc/hostname
</code></pre></div><p><strong>å®¹å™¨å¼€å¯å‘½ä»¤è¡Œäº¤äº’</strong>:</p> <div class="language-sh extra-class"><pre class="language-sh"><code>docker <span class="token builtin class-name">exec</span> -it nginx <span class="token function">bash</span>
</code></pre></div><p>ä¸Šé¢ -i ( --interactive ) è¡¨ç¤ºä¿æŒæˆ‘ä»¬çš„è¾“å…¥æµï¼Œåªæœ‰ä½¿ç”¨å®ƒæ‰èƒ½ä¿è¯æ§åˆ¶å°ç¨‹åºèƒ½å¤Ÿæ­£ç¡®è¯†åˆ«æˆ‘ä»¬çš„å‘½ä»¤ã€‚è€Œ -t ( --tty ) è¡¨ç¤ºå¯ç”¨ä¸€ä¸ªä¼ªç»ˆç«¯ï¼Œå½¢æˆæˆ‘ä»¬ä¸ bash çš„äº¤äº’ï¼Œå¦‚æœæ²¡æœ‰å®ƒï¼Œæˆ‘ä»¬æ— æ³•çœ‹åˆ° bash å†…éƒ¨çš„æ‰§è¡Œç»“æœ</p> <p><strong>è¡”æ¥å®¹å™¨</strong>: <code>docker attach [name/tag/id]</code></p> <div class="language-sh extra-class"><pre class="language-sh"><code>docker attach nginx
</code></pre></div><h3 id="æ•°æ®ç®¡ç†"><a href="#æ•°æ®ç®¡ç†" class="header-anchor">#</a> æ•°æ®ç®¡ç†</h3> <p>æ•°æ®ç®¡ç†åˆåˆ†ä¸ºä»¥ä¸‹å‡ ä¸ªéƒ¨åˆ†:</p> <ul><li>æŒ‚è½½æ–¹å¼</li> <li>æ•°æ®å·æ“ä½œ</li> <li>æ•°æ®å·å®¹å™¨</li> <li>å¤‡ä»½è¿ç§»</li></ul> <h4 id="æŒ‚è½½æ–¹å¼"><a href="#æŒ‚è½½æ–¹å¼" class="header-anchor">#</a> æŒ‚è½½æ–¹å¼</h4> <p>åœ¨ docker ä¸­, ä¸ºäº†æ–¹ä¾¿ä¸å¤–é¢æ•°æ®ä¼ é€’, docker åŸºäºåº•å±‚å­˜å‚¨å®ç°ï¼Œæä¾›äº†ä¸‰ç§é€‚ç”¨äºä¸åŒåœºæ™¯çš„æ–‡ä»¶ç³»ç»ŸæŒ‚è½½æ–¹å¼ï¼šBind Mountã€Volume å’Œ Tmpfs Mountã€‚</p> <ul><li>Bind Mount</li></ul> <p>èƒ½å¤Ÿç›´æ¥å°†å®¿ä¸»æ“ä½œç³»ç»Ÿä¸­çš„ç›®å½•å’Œæ–‡ä»¶æŒ‚è½½åˆ°å®¹å™¨å†…çš„æ–‡ä»¶ç³»ç»Ÿä¸­ï¼Œé€šè¿‡æŒ‡å®šå®¹å™¨å¤–çš„è·¯å¾„å’Œå®¹å™¨å†…çš„è·¯å¾„ï¼Œå°±å¯ä»¥å½¢æˆæŒ‚è½½æ˜ å°„å…³ç³»ï¼Œåœ¨å®¹å™¨å†…å¤–å¯¹æ–‡ä»¶çš„è¯»å†™ï¼Œéƒ½æ˜¯ç›¸äº’å¯è§çš„ã€‚</p> <p><code>ä½¿ç”¨æ–¹å¼: -v &lt;host-path&gt;:&lt;container-path&gt;</code></p> <div class="language-sh extra-class"><pre class="language-sh"><code>docker run -d --name nginx -v /webapp/html:/usr/share/nginx/html nginx:1.12
</code></pre></div><ul><li>Volume</li></ul> <p>ä¹Ÿæ˜¯ä»å®¿ä¸»æ“ä½œç³»ç»Ÿä¸­æŒ‚è½½ç›®å½•åˆ°å®¹å™¨å†…ï¼Œåªä¸è¿‡è¿™ä¸ªæŒ‚è½½çš„ç›®å½•ç”± Docker è¿›è¡Œç®¡ç†ï¼Œæˆ‘ä»¬åªéœ€è¦æŒ‡å®šå®¹å™¨å†…çš„ç›®å½•ï¼Œä¸éœ€è¦å…³å¿ƒå…·ä½“æŒ‚è½½åˆ°äº†å®¿ä¸»æ“ä½œç³»ç»Ÿä¸­çš„å“ªé‡Œã€‚</p> <p><code>ä½¿ç”¨æ–¹å¼: -v &lt;container-path&gt;</code></p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token function">sudo</span> docker run -d --name webapp -v /webapp/storage webapp:latest

<span class="token comment"># å¦‚éœ€æŸ¥çœ‹å…·ä½“æŒ‚è½½ä¿¡æ¯</span>
docker inspect webapp
</code></pre></div><ul><li>Tmpfs Mount</li></ul> <p>æ”¯æŒæŒ‚è½½ç³»ç»Ÿå†…å­˜ä¸­çš„ä¸€éƒ¨åˆ†åˆ°å®¹å™¨çš„æ–‡ä»¶ç³»ç»Ÿé‡Œï¼Œä¸è¿‡ç”±äºå†…å­˜å’Œå®¹å™¨çš„ç‰¹å¾ï¼Œå®ƒçš„å­˜å‚¨å¹¶ä¸æ˜¯æŒä¹…çš„ï¼Œå…¶ä¸­çš„å†…å®¹ä¼šéšç€å®¹å™¨çš„åœæ­¢è€Œæ¶ˆå¤±ã€‚</p> <p><code>ä½¿ç”¨æ–¹å¼: --tmpfs &lt;container-path&gt;</code></p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token function">sudo</span> docker run -d --name webapp -v /webapp/storage webapp:latest

<span class="token comment"># å¦‚éœ€æŸ¥çœ‹ä¸´æ—¶æ–‡ä»¶ç›®å½•</span>
docker inspect webapp
</code></pre></div><ul><li>Mount</li></ul> <p>åœ¨ --mount ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡é€—å·åˆ†éš”è¿™ç§ CSV æ ¼å¼æ¥å®šä¹‰å¤šä¸ªå‚æ•°ã€‚å…¶ä¸­ï¼Œé€šè¿‡ type æˆ‘ä»¬å¯ä»¥å®šä¹‰æŒ‚è½½ç±»å‹ï¼Œå…¶å€¼å¯ä»¥æ˜¯ï¼šbindï¼Œvolume æˆ– tmpfsã€‚å¦å¤–ï¼Œ--mount é€‰é¡¹èƒ½å¤Ÿå¸®åŠ©æˆ‘ä»¬å®ç°é›†ç¾¤æŒ‚è½½çš„å®šä¹‰;</p> <p><code>ä½¿ç”¨æ–¹å¼: --mount &lt;type&gt;</code></p> <div class="language-sh extra-class"><pre class="language-sh"><code>docker run -d --name webapp webapp:latest --mount <span class="token string">'type=volume,src=appdata,dst=/webapp/storage,volume-driver=local,volume-opt=type=nfs,volume-opt=device=&lt;nfs-server&gt;:&lt;nfs-path&gt;'</span> webapp:latest
</code></pre></div><h4 id="æ•°æ®å·æ“ä½œ"><a href="#æ•°æ®å·æ“ä½œ" class="header-anchor">#</a> æ•°æ®å·æ“ä½œ</h4> <p>æ•°æ®å·å‘½å: <code>-v &lt;name&gt;:&lt;container-path&gt;</code></p> <div class="language-sh extra-class"><pre class="language-sh"><code>docker run -d --name webapp -v appdata:/webapp/storage webapp:latest
</code></pre></div><p>å…±ç”¨æ•°æ®å·: <code>ä½¿ç”¨åŒåçš„æ•°æ®å·[name]å³å¯</code></p> <div class="language-sh extra-class"><pre class="language-sh"><code>docker run -d --name webapp -v html:/webapp/html webapp:latest
docker run -d --name nginx -v html:/usr/share/nginx/html:ro nginx:1.12
</code></pre></div><p>åˆ›å»ºç‹¬ç«‹æ•°æ®å·: <code>docker volume create</code></p> <div class="language-sh extra-class"><pre class="language-sh"><code>docker volume create appdata
</code></pre></div><p>æŸ¥çœ‹å·²åˆ›å»ºçš„æ•°æ®å·: <code>docker volume ls</code></p> <div class="language-sh extra-class"><pre class="language-sh"><code>docker volume <span class="token function">ls</span>
</code></pre></div><p>åˆ é™¤æ•°æ®å·: <code>docker volume rm</code></p> <div class="language-sh extra-class"><pre class="language-sh"><code>docker volume <span class="token function">rm</span> appdata

<span class="token comment"># åŠ ä¸Š-vå‚æ•°å¯ä»¥ä¸€å¹¶åˆ é™¤å®¹å™¨å…³è”çš„æ•°æ®å·</span>
docker <span class="token function">rm</span> -v webapp
</code></pre></div><p>åˆ é™¤æœªå¼•ç”¨çš„æ•°æ®å·: <code>docker volume prune</code></p> <div class="language-sh extra-class"><pre class="language-sh"><code>docker volume prune -f
</code></pre></div><h4 id="æ•°æ®å·å®¹å™¨"><a href="#æ•°æ®å·å®¹å™¨" class="header-anchor">#</a> æ•°æ®å·å®¹å™¨</h4> <p>åˆ›å»ºæ•°æ®å·å®¹å™¨çš„æ–¹å¼å¾ˆç®€å•ï¼Œç”±äºä¸éœ€è¦å®¹å™¨æœ¬èº«è¿è¡Œï¼Œå› è€Œæˆ‘ä»¬æ‰¾ä¸ªç®€å•çš„ç³»ç»Ÿé•œåƒéƒ½å¯ä»¥å®Œæˆåˆ›å»ºã€‚</p> <div class="language-sh extra-class"><pre class="language-sh"><code>docker create --name appdata -v /webapp/storage ubuntu
</code></pre></div><p>å¼•ç”¨æ•°æ®å·å®¹å™¨: <code>--volumes-from &lt;name&gt;</code></p> <div class="language-sh extra-class"><pre class="language-sh"><code>docker run -d --name webapp --volumes-from appdata webapp:latest
</code></pre></div><h4 id="å¤‡ä»½è¿ç§»"><a href="#å¤‡ä»½è¿ç§»" class="header-anchor">#</a> å¤‡ä»½è¿ç§»</h4> <p>è¦å¤‡ä»½æ•°æ®ï¼Œæˆ‘ä»¬å…ˆå»ºç«‹ä¸€ä¸ªä¸´æ—¶çš„å®¹å™¨ï¼Œå°†ç”¨äºå¤‡ä»½çš„ç›®å½•å’Œè¦å¤‡ä»½çš„æ•°æ®å·éƒ½æŒ‚è½½åˆ°è¿™ä¸ªå®¹å™¨ä¸Š</p> <div class="language-sh extra-class"><pre class="language-sh"><code>docker run --rm --volumes-from appdata -v /backup:/backup ubuntu <span class="token function">tar</span> cvf /backup/backup.tar /webapp/storage
</code></pre></div><p>å¦‚æœè¦æ¢å¤æ•°æ®å·ä¸­çš„æ•°æ®ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥å€ŸåŠ©ä¸´æ—¶å®¹å™¨å®Œæˆ</p> <div class="language-sh extra-class"><pre class="language-sh"><code>docker run --rm --volumes-from appdata -v /backup:/backup ubuntu <span class="token function">tar</span> xvf /backup/backup.tar -C /webapp/storage --strip
</code></pre></div><h3 id="ä½¿ç”¨ç½‘ç»œ"><a href="#ä½¿ç”¨ç½‘ç»œ" class="header-anchor">#</a> ä½¿ç”¨ç½‘ç»œ</h3> <p>å®¹å™¨ä½¿ç”¨ç½‘ç»œè¿™éƒ¨åˆ†, ç¬”è€…å°†è¿™éƒ¨åˆ†åˆ†ä¸ºä»¥ä¸‹å‡ ä¸ªéƒ¨åˆ†æ¥æè¿°:</p> <ul><li>æ ¸å¿ƒç»„æˆ</li> <li>å®¹å™¨äº’è”</li> <li>æš´éœ²ç«¯å£</li> <li>åˆ«åè¿æ¥</li> <li>åˆ›å»ºç½‘ç»œ</li> <li>ç«¯å£æ˜ å°„</li></ul> <h4 id="æ ¸å¿ƒç»„æˆ"><a href="#æ ¸å¿ƒç»„æˆ" class="header-anchor">#</a> æ ¸å¿ƒç»„æˆ</h4> <p>å®¹å™¨ç½‘ç»œå®è´¨ä¸Šä¹Ÿæ˜¯ç”± Docker ä¸ºåº”ç”¨ç¨‹åºæ‰€åˆ›é€ çš„è™šæ‹Ÿç¯å¢ƒçš„ä¸€éƒ¨åˆ†ï¼Œå®ƒèƒ½è®©åº”ç”¨ä»å®¿ä¸»æœºæ“ä½œç³»ç»Ÿçš„ç½‘ç»œç¯å¢ƒä¸­ç‹¬ç«‹å‡ºæ¥ï¼Œå½¢æˆå®¹å™¨è‡ªæœ‰çš„ç½‘ç»œè®¾å¤‡ã€IP åè®®æ ˆã€ç«¯å£å¥—æ¥å­—ã€IP è·¯ç”±è¡¨ã€é˜²ç«å¢™ç­‰ç­‰ä¸ç½‘ç»œç›¸å…³çš„æ¨¡å—, å®¹å™¨çš„ç½‘ç»œä¸»è¦ç”±<code>æ²™ç›’</code>å’Œ<code>ç½‘ç»œ</code>ä»¥åŠ<code>ç«¯ç‚¹</code>ç»„æˆ</p> <ul><li><strong>æ²™ç›’</strong>: æä¾›äº†å®¹å™¨çš„è™šæ‹Ÿç½‘ç»œæ ˆ</li> <li><strong>ç½‘ç»œ</strong>: ç»„æˆ Docker å†…éƒ¨çš„è™šæ‹Ÿå­ç½‘</li> <li><strong>ç«¯ç‚¹</strong>: ä¸»è¦ç›®çš„æ˜¯å½¢æˆä¸€ä¸ªå¯ä»¥æ§åˆ¶çš„çªç ´å°é—­çš„ç½‘ç»œç¯å¢ƒçš„å‡ºå…¥å£</li></ul> <h4 id="å®¹å™¨äº’è”"><a href="#å®¹å™¨äº’è”" class="header-anchor">#</a> å®¹å™¨äº’è”</h4> <p>è¦è®©ä¸€ä¸ªå®¹å™¨è¿æ¥åˆ°å¦å¤–ä¸€ä¸ªå®¹å™¨ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨å®¹å™¨é€šè¿‡<code>docker create</code>æˆ–<code>docker run</code>åˆ›å»ºæ—¶é€šè¿‡<code>--link</code>é€‰é¡¹è¿›è¡Œé…ç½®</p> <p>ä¾‹å¦‚ï¼Œè¿™é‡Œæˆ‘ä»¬åˆ›å»ºä¸€ä¸ª MySQL å®¹å™¨ï¼Œå°†è¿è¡Œæˆ‘ä»¬ Web åº”ç”¨çš„å®¹å™¨è¿æ¥åˆ°è¿™ä¸ª MySQL å®¹å™¨ä¸Šï¼Œæ‰“é€šä¸¤ä¸ªå®¹å™¨é—´çš„ç½‘ç»œï¼Œå®ç°å®ƒä»¬ä¹‹é—´çš„ç½‘ç»œäº’é€šã€‚</p> <div class="language-sh extra-class"><pre class="language-sh"><code>  docker run -d --name mysql -e <span class="token assign-left variable">MYSQL_RANDOM_ROOT_PASSWORD</span><span class="token operator">=</span>yes mysql
  docker run -d --name webapp --link mysql webapp:latest
</code></pre></div><h4 id="æš´éœ²ç«¯å£"><a href="#æš´éœ²ç«¯å£" class="header-anchor">#</a> æš´éœ²ç«¯å£</h4> <p>å£çš„æš´éœ²å¯ä»¥é€šè¿‡ Docker é•œåƒè¿›è¡Œå®šä¹‰ï¼Œä¹Ÿå¯ä»¥åœ¨å®¹å™¨åˆ›å»ºæ—¶è¿›è¡Œå®šä¹‰ã€‚åœ¨å®¹å™¨åˆ›å»ºæ—¶è¿›è¡Œå®šä¹‰çš„æ–¹æ³•æ˜¯å€ŸåŠ© --expose è¿™ä¸ªé€‰é¡¹ã€‚</p> <div class="language-sh extra-class"><pre class="language-sh"><code>docker run -d --name mysql -e <span class="token assign-left variable">MYSQL_RANDOM_ROOT_PASSWORD</span><span class="token operator">=</span>yes --expose <span class="token number">13306</span> --expose <span class="token number">23306</span> mysql:5.7
</code></pre></div><p>è¿™é‡Œæˆ‘ä»¬ä¸º MySQL æš´éœ²äº† 13306 å’Œ 23306 è¿™ä¸¤ä¸ªç«¯å£ï¼Œæš´éœ²åæˆ‘ä»¬å¯ä»¥åœ¨ docker ps ä¸­çœ‹åˆ°è¿™ä¸¤ä¸ªç«¯å£å·²ç»æˆåŠŸçš„æ‰“å¼€ã€‚</p> <div class="language-sh extra-class"><pre class="language-sh"><code>$ docker <span class="token function">ps</span> 
CONTAINER ID        IMAGE               COMMAND                  CREATED             STATUS              PORTS                                       NAMES
3c4e645f21d7        mysql:5.7           <span class="token string">&quot;docker-entrypoint.sâ€¦&quot;</span>   <span class="token number">4</span> seconds ago       Up <span class="token number">3</span> seconds        <span class="token number">3</span>
</code></pre></div><h4 id="åˆ«åè¿æ¥"><a href="#åˆ«åè¿æ¥" class="header-anchor">#</a> åˆ«åè¿æ¥</h4> <p>çº¯ç²¹çš„é€šè¿‡å®¹å™¨åæ¥æ‰“å¼€å®¹å™¨é—´çš„ç½‘ç»œé€šé“ç¼ºä¹ä¸€å®šçš„çµæ´»æ€§ï¼Œåœ¨ Docker é‡Œè¿˜æ”¯æŒè¿æ¥æ—¶ä½¿ç”¨åˆ«åæ¥ä½¿æˆ‘ä»¬æ‘†è„±å®¹å™¨åçš„é™åˆ¶ã€‚</p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token function">sudo</span> docker run -d --name webapp --link mysql:database webapp:latest
</code></pre></div><p>åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬ä½¿ç”¨ <code>--link &lt;name&gt;:&lt;alias&gt;</code> çš„å½¢å¼ï¼Œè¿æ¥åˆ° MySQL å®¹å™¨ï¼Œå¹¶è®¾ç½®å®ƒçš„åˆ«åä¸º databaseã€‚å½“æˆ‘ä»¬è¦åœ¨ Web åº”ç”¨ä¸­ä½¿ç”¨ MySQL è¿æ¥æ—¶ï¼Œæˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨ database æ¥ä»£æ›¿è¿æ¥åœ°å€äº†ã€‚</p> <div class="language-sh extra-class"><pre class="language-sh"><code>String url <span class="token operator">=</span> <span class="token string">&quot;jdbc:mysql://database:3306/webapp&quot;</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="åˆ›å»ºç½‘ç»œ"><a href="#åˆ›å»ºç½‘ç»œ" class="header-anchor">#</a> åˆ›å»ºç½‘ç»œ</h4> <p>åœ¨ Docker é‡Œï¼Œæˆ‘ä»¬ä¹Ÿèƒ½å¤Ÿåˆ›å»ºç½‘ç»œï¼Œå½¢æˆè‡ªå·±å®šä¹‰è™šæ‹Ÿå­ç½‘çš„ç›®çš„ã€‚</p> <p>docker CLI é‡Œä¸ç½‘ç»œç›¸å…³çš„å‘½ä»¤éƒ½ä»¥ docker network å¼€å¤´ï¼Œå…¶ä¸­åˆ›å»ºç½‘ç»œçš„å‘½ä»¤æ˜¯ <code>docker network create</code>ã€‚</p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token function">sudo</span> docker network create -d bridge individual
</code></pre></div><p>é€šè¿‡ <code>docker network ls</code> æˆ–æ˜¯ <code>docker network list</code> å¯ä»¥æŸ¥çœ‹ Docker ä¸­å·²ç»å­˜åœ¨çš„ç½‘ç»œã€‚</p> <div class="language-sh extra-class"><pre class="language-sh"><code>$ <span class="token function">sudo</span> docker network <span class="token function">ls</span>
NETWORK ID          NAME                DRIVER              SCOPE
bc14eb1da66b        bridge              bridge              <span class="token builtin class-name">local</span>
35c3ef1cc27d        individual          bridge              <span class="token builtin class-name">local</span>
</code></pre></div><p>ä¹‹ååœ¨æˆ‘ä»¬åˆ›å»ºå®¹å™¨æ—¶ï¼Œå¯ä»¥é€šè¿‡<code>--network</code> æ¥æŒ‡å®šå®¹å™¨æ‰€åŠ å…¥çš„ç½‘ç»œï¼Œä¸€æ—¦è¿™ä¸ªå‚æ•°è¢«æŒ‡å®šï¼Œå®¹å™¨ä¾¿ä¸ä¼šé»˜è®¤åŠ å…¥åˆ° bridge è¿™ä¸ªç½‘ç»œä¸­äº† ( ä½†æ˜¯ä»ç„¶å¯ä»¥é€šè¿‡ <code>--network bridge</code> è®©å…¶åŠ å…¥ )ã€‚</p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token function">sudo</span> docker run -d --name mysql -e <span class="token assign-left variable">MYSQL_RANDOM_ROOT_PASSWORD</span><span class="token operator">=</span>yes --network individual mysql:5.7
</code></pre></div><p>æŸ¥çœ‹å®¹å™¨ç½‘ç»œ: <code>docker inspect</code></p> <div class="language-sh extra-class"><pre class="language-sh"><code>$ <span class="token function">sudo</span> docker inspect mysql
<span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
<span class="token comment">## ......</span>
        <span class="token string">&quot;NetworkSettings&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
<span class="token comment">## ......</span>
            <span class="token string">&quot;Networks&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
                <span class="token string">&quot;individual&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
                    <span class="token string">&quot;IPAMConfig&quot;</span><span class="token builtin class-name">:</span> null,
                    <span class="token string">&quot;Links&quot;</span><span class="token builtin class-name">:</span> null,
                    <span class="token string">&quot;Aliases&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">[</span>
                        <span class="token string">&quot;2ad678e6d110&quot;</span>
                    <span class="token punctuation">]</span>,
                    <span class="token string">&quot;NetworkID&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;35c3ef1cc27d24e15a2b22bdd606dc28e58f0593ead6a57da34a8ed989b1b15d&quot;</span>,
                    <span class="token string">&quot;EndpointID&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;41a2345b913a45c3c5aae258776fcd1be03b812403e249f96b161e50d66595ab&quot;</span>,
                    <span class="token string">&quot;Gateway&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;172.18.0.1&quot;</span>,
                    <span class="token string">&quot;IPAddress&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;172.18.0.2&quot;</span>,
                    <span class="token string">&quot;IPPrefixLen&quot;</span><span class="token builtin class-name">:</span> <span class="token number">16</span>,
                    <span class="token string">&quot;IPv6Gateway&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;&quot;</span>,
                    <span class="token string">&quot;GlobalIPv6Address&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;&quot;</span>,
                    <span class="token string">&quot;GlobalIPv6PrefixLen&quot;</span><span class="token builtin class-name">:</span> <span class="token number">0</span>,
                    <span class="token string">&quot;MacAddress&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;02:42:ac:12:00:02&quot;</span>,
                    <span class="token string">&quot;DriverOpts&quot;</span><span class="token builtin class-name">:</span> null
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
<span class="token comment">## ......</span>
        <span class="token punctuation">}</span>
<span class="token comment">## ......</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">]</span>
</code></pre></div><h4 id="ç«¯å£æ˜ å°„"><a href="#ç«¯å£æ˜ å°„" class="header-anchor">#</a> ç«¯å£æ˜ å°„</h4> <p>è¦æ˜ å°„ç«¯å£ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨åˆ›å»ºå®¹å™¨æ—¶ä½¿ç”¨<code>-p</code>æˆ–è€…æ˜¯ <code>--publish</code>é€‰é¡¹ã€‚</p> <p>ç«¯å£æ˜ å°„æ ¼å¼: <code>-p &lt;ip&gt;:&lt;host-port&gt;:&lt;container-port&gt;</code></p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token function">sudo</span> docker run -d --name nginx -p <span class="token number">80</span>:80 -p <span class="token number">443</span>:443 nginx:1.12
</code></pre></div><h2 id="dockerfile"><a href="#dockerfile" class="header-anchor">#</a> Dockerfile</h2> <p>Dockerfile æ˜¯ Docker ä¸­ç”¨äºå®šä¹‰é•œåƒè‡ªåŠ¨åŒ–æ„å»ºæµç¨‹çš„é…ç½®æ–‡ä»¶, é€šè¿‡ Dockerfile æˆ‘ä»¬å¯ä»¥æ›´åŠ æ¸…æ™°ã€æ˜ç¡®çš„ç»™å®š Docker é•œåƒçš„åˆ¶ä½œè¿‡ç¨‹, æ–‡ä»¶ä½“ç§¯å°å·§èƒ½æ›´åŠ æ–¹ä¾¿å®ç°å®¹å™¨è¿ç§»å’Œé›†ç¾¤éƒ¨ç½²</p> <ul><li>Dockerfile ç»“æ„</li> <li>å¸¸è§ Dockerfile æŒ‡ä»¤</li> <li>Dockerfile æ„å»º</li></ul> <h3 id="dockerfile-ç»“æ„"><a href="#dockerfile-ç»“æ„" class="header-anchor">#</a> Dockerfile ç»“æ„</h3> <p>å¦‚æœè¿›è¡Œç»†åˆ†ï¼Œæˆ‘ä»¬å¯ä»¥å°† Dockerfile çš„æŒ‡ä»¤ç®€å•åˆ†ä¸ºäº”å¤§ç±»ã€‚</p> <ul><li>åŸºç¡€æŒ‡ä»¤ï¼šç”¨äºå®šä¹‰æ–°é•œåƒçš„åŸºç¡€å’Œæ€§è´¨ã€‚</li> <li>æ§åˆ¶æŒ‡ä»¤ï¼šæ˜¯æŒ‡å¯¼é•œåƒæ„å»ºçš„æ ¸å¿ƒéƒ¨åˆ†ï¼Œç”¨äºæè¿°é•œåƒåœ¨æ„å»ºè¿‡ç¨‹ä¸­éœ€è¦æ‰§è¡Œçš„å‘½ä»¤ã€‚</li> <li>å¼•å…¥æŒ‡ä»¤ï¼šç”¨äºå°†å¤–éƒ¨æ–‡ä»¶ç›´æ¥å¼•å…¥åˆ°æ„å»ºé•œåƒå†…éƒ¨ã€‚</li> <li>æ‰§è¡ŒæŒ‡ä»¤ï¼šèƒ½å¤Ÿä¸ºåŸºäºé•œåƒæ‰€åˆ›å»ºçš„å®¹å™¨ï¼ŒæŒ‡å®šåœ¨å¯åŠ¨æ—¶éœ€è¦æ‰§è¡Œçš„è„šæœ¬æˆ–å‘½ä»¤ã€‚</li> <li>é…ç½®æŒ‡ä»¤ï¼šå¯¹é•œåƒä»¥åŠåŸºäºé•œåƒæ‰€åˆ›å»ºçš„å®¹å™¨ï¼Œå¯ä»¥é€šè¿‡é…ç½®æŒ‡ä»¤å¯¹å…¶ç½‘ç»œã€ç”¨æˆ·ç­‰å†…å®¹è¿›è¡Œé…ç½®ã€‚</li></ul> <h3 id="å¸¸è§-dockerfile-æŒ‡ä»¤"><a href="#å¸¸è§-dockerfile-æŒ‡ä»¤" class="header-anchor">#</a> å¸¸è§ Dockerfile æŒ‡ä»¤</h3> <p><strong>FROM</strong>: <code>FROM</code> æŒ‡ä»¤æŒ‡å®šä¸€ä¸ªåŸºç¡€é•œåƒ, å¯ä»¥ä½¿ç”¨ä»¥ä¸‹ä¸‰ç§å½¢å¼ä½¿ç”¨</p> <div class="language-Dockerfile extra-class"><pre class="language-dockerfile"><code><span class="token keyword">FROM</span> &lt;image<span class="token punctuation">&gt;</span> <span class="token punctuation">[</span>AS &lt;name<span class="token punctuation">&gt;</span><span class="token punctuation">]</span>
<span class="token keyword">FROM</span> &lt;image<span class="token punctuation">&gt;</span><span class="token punctuation">[</span><span class="token punctuation">:</span>&lt;tag<span class="token punctuation">&gt;</span><span class="token punctuation">]</span> <span class="token punctuation">[</span>AS &lt;name<span class="token punctuation">&gt;</span><span class="token punctuation">]</span>
<span class="token keyword">FROM</span> &lt;image<span class="token punctuation">&gt;</span><span class="token punctuation">[</span>@&lt;digest<span class="token punctuation">&gt;</span><span class="token punctuation">]</span> <span class="token punctuation">[</span>AS &lt;name<span class="token punctuation">&gt;</span><span class="token punctuation">]</span>
</code></pre></div><p><strong>RUN</strong>: <code>RUN</code> æŒ‡ä»¤ä¹‹åï¼Œæˆ‘ä»¬ç›´æ¥æ‹¼æ¥ä¸Šéœ€è¦æ‰§è¡Œçš„å‘½ä»¤ï¼Œåœ¨æ„å»ºæ—¶ï¼ŒDocker å°±ä¼šæ‰§è¡Œè¿™äº›å‘½ä»¤ï¼Œå¹¶å°†å®ƒä»¬å¯¹æ–‡ä»¶ç³»ç»Ÿçš„ä¿®æ”¹è®°å½•ä¸‹æ¥ï¼Œå½¢æˆé•œåƒçš„å˜åŒ–;</p> <p>ä¸»è¦ç”¨æ¥ç”¨æ¥æŒ‡å®šæ„å»ºé•œåƒ(build image) è¿‡ç¨‹ä¸­æ‰§è¡Œçš„å‘½ä»¤</p> <div class="language-sh extra-class"><pre class="language-sh"><code>RUN <span class="token operator">&lt;</span>command<span class="token operator">&gt;</span>
RUN <span class="token punctuation">[</span><span class="token string">&quot;executable&quot;</span>, <span class="token string">&quot;param1&quot;</span>, <span class="token string">&quot;param2&quot;</span><span class="token punctuation">]</span>`
</code></pre></div><p><strong>CMD</strong>: æŒ‡å®šå®¹å™¨è¿è¡Œæ—¶(<code>docker run</code>) é»˜è®¤å‘½ä»¤å’Œå‚æ•°ï¼Œå¯ä»¥è¢« <code>docker run *** command</code> çš„å‘½ä»¤æ‰€è¦†ç›–</p> <div class="custom-block tip"><p class="custom-block-title">RUN &amp; CMD &amp; ENTRYPOINT åŒºåˆ«:</p> <p><code>RUN</code>ä¸æ¥ä»»ä½•å‘½ä»¤, åŒæ—¶æ²¡æœ‰<code>ENTRYPOINT</code>æŒ‡å®š, å°†é»˜è®¤æ‰§è¡Œ CMD</p> <p><code>RUN</code>ä¸æ¥ä»»ä½•å‘½ä»¤, åŒæ—¶å­˜åœ¨<code>ENTRYPOINT</code>å’Œ<code>CMD</code>, <code>CMD</code>å°†ä½œä¸º<code>ENTRYPOINT</code>çš„å‚æ•°</p> <p><code>RUN</code>åæ¥ command, åŒæ—¶å­˜åœ¨<code>ENTRYPOINT</code>å’Œ<code>CMD</code>, <code>RUN</code>åçš„å‚æ•°ä½œä¸º<code>ENTRYPOINT</code>çš„å‚æ•°, <code>CMD</code>è¢«å¿½ç•¥</p></div> <div class="language-sh extra-class"><pre class="language-sh"><code>CMD <span class="token punctuation">[</span><span class="token string">&quot;executable&quot;</span>,<span class="token string">&quot;param1&quot;</span>,<span class="token string">&quot;param2&quot;</span><span class="token punctuation">]</span>
CMD <span class="token punctuation">[</span><span class="token string">&quot;param1&quot;</span>,<span class="token string">&quot;param2&quot;</span><span class="token punctuation">]</span>
CMD <span class="token builtin class-name">command</span> param1 param2
</code></pre></div><p><strong>ENTRYPOINT</strong>: å®¹å™¨è¿è¡Œæ—¶æ‰§è¡Œçš„å‘½ä»¤ï¼Œä½†æ˜¯å¯ä»¥æ¥å—<code>docker run *** args</code>æˆ–è€… CMD æä¾›çš„å‚æ•°ï¼Œä¸€èˆ¬ç”¨äºå®¹å™¨é…ç½®åˆå§‹åŒ–</p> <div class="language-sh extra-class"><pre class="language-sh"><code>ENTRYPOINT <span class="token punctuation">[</span><span class="token string">&quot;executable&quot;</span>, <span class="token string">&quot;param1&quot;</span>, <span class="token string">&quot;param2&quot;</span><span class="token punctuation">]</span>
ENTRYPOINT <span class="token builtin class-name">command</span> param1 param2
</code></pre></div><p><strong>EXPOSE</strong>: é€šè¿‡ EXPOSE æŒ‡ä»¤å°±å¯ä»¥ä¸ºé•œåƒæŒ‡å®šè¦æš´éœ²çš„ç«¯å£ã€‚</p> <div class="language-sh extra-class"><pre class="language-sh"><code>EXPOSE <span class="token operator">&lt;</span>port<span class="token operator">&gt;</span> <span class="token punctuation">[</span><span class="token operator">&lt;</span>port<span class="token operator">&gt;</span>/<span class="token operator">&lt;</span>protocol<span class="token operator">&gt;</span><span class="token punctuation">..</span>.<span class="token punctuation">]</span>
</code></pre></div><p><strong>VOLUME</strong>: å®šä¹‰åŸºäºæ­¤é•œåƒçš„å®¹å™¨æ‰€è‡ªåŠ¨å»ºç«‹çš„æ•°æ®å·, ä»¥ä¾¿äºæŒä¹…åŒ–ä¸€äº›æ•°æ®ï¼Œæ¯”å¦‚æ•°æ®åº“ä¸­å­˜å‚¨æ•°æ®çš„æ–‡ä»¶å¤¹å°±éœ€è¦å•ç‹¬å¤„ç†</p> <div class="language-sh extra-class"><pre class="language-sh"><code>VOLUME <span class="token punctuation">[</span><span class="token string">&quot;/data&quot;</span><span class="token punctuation">]</span>
</code></pre></div><p>åœ¨ VOLUME æŒ‡ä»¤ä¸­å®šä¹‰çš„ç›®å½•ï¼Œåœ¨åŸºäºæ–°é•œåƒåˆ›å»ºå®¹å™¨æ—¶ï¼Œä¼šè‡ªåŠ¨å»ºç«‹ä¸ºæ•°æ®å·ï¼Œä¸éœ€è¦æˆ‘ä»¬å†å•ç‹¬ä½¿ç”¨ -v é€‰é¡¹æ¥é…ç½®äº†ã€‚</p> <p><strong>COPY &amp; ADD</strong></p> <p>åœ¨åˆ¶ä½œæ–°çš„é•œåƒçš„æ—¶å€™ï¼Œæˆ‘ä»¬å¯èƒ½éœ€è¦å°†ä¸€äº›è½¯ä»¶é…ç½®ã€ç¨‹åºä»£ç ã€æ‰§è¡Œè„šæœ¬ç­‰ç›´æ¥å¯¼å…¥åˆ°é•œåƒå†…çš„æ–‡ä»¶ç³»ç»Ÿé‡Œï¼Œä½¿ç”¨ <code>COPY</code> æˆ– ADD æŒ‡ä»¤èƒ½å¤Ÿå¸®åŠ©æˆ‘ä»¬ç›´æ¥ä»å®¿ä¸»æœºçš„æ–‡ä»¶ç³»ç»Ÿé‡Œæ‹·è´å†…å®¹åˆ°é•œåƒé‡Œçš„æ–‡ä»¶ç³»ç»Ÿä¸­ã€‚</p> <div class="language-sh extra-class"><pre class="language-sh"><code>COPY <span class="token punctuation">[</span>--chown<span class="token operator">=</span><span class="token operator">&lt;</span>user<span class="token operator">&gt;</span>:<span class="token operator">&lt;</span>group<span class="token operator">&gt;</span><span class="token punctuation">]</span> <span class="token operator">&lt;</span>src<span class="token operator">&gt;</span><span class="token punctuation">..</span>. <span class="token operator">&lt;</span>dest<span class="token operator">&gt;</span>
ADD <span class="token punctuation">[</span>--chown<span class="token operator">=</span><span class="token operator">&lt;</span>user<span class="token operator">&gt;</span>:<span class="token operator">&lt;</span>group<span class="token operator">&gt;</span><span class="token punctuation">]</span> <span class="token operator">&lt;</span>src<span class="token operator">&gt;</span><span class="token punctuation">..</span>. <span class="token operator">&lt;</span>dest<span class="token operator">&gt;</span>

COPY <span class="token punctuation">[</span>--chown<span class="token operator">=</span><span class="token operator">&lt;</span>user<span class="token operator">&gt;</span>:<span class="token operator">&lt;</span>group<span class="token operator">&gt;</span><span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token string">&quot;&lt;src&gt;&quot;</span>,<span class="token punctuation">..</span>. <span class="token string">&quot;&lt;dest&gt;&quot;</span><span class="token punctuation">]</span>
ADD <span class="token punctuation">[</span>--chown<span class="token operator">=</span><span class="token operator">&lt;</span>user<span class="token operator">&gt;</span>:<span class="token operator">&lt;</span>group<span class="token operator">&gt;</span><span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token string">&quot;&lt;src&gt;&quot;</span>,<span class="token punctuation">..</span>. <span class="token string">&quot;&lt;dest&gt;&quot;</span><span class="token punctuation">]</span>
</code></pre></div><p>COPY ä¸ ADD æŒ‡ä»¤çš„å®šä¹‰æ–¹å¼å®Œå…¨ä¸€æ ·ï¼Œéœ€è¦æ³¨æ„çš„ä»…æ˜¯å½“æˆ‘ä»¬çš„ç›®å½•ä¸­å­˜åœ¨ç©ºæ ¼æ—¶ï¼Œå¯ä»¥ä½¿ç”¨åä¸¤ç§æ ¼å¼é¿å…ç©ºæ ¼äº§ç”Ÿæ­§ä¹‰ã€‚</p> <p>å¯¹æ¯” <code>COPY</code> ä¸ <code>ADD</code>ï¼Œä¸¤è€…çš„åŒºåˆ«ä¸»è¦åœ¨äº <code>ADD</code> èƒ½å¤Ÿæ”¯æŒä½¿ç”¨ç½‘ç»œç«¯çš„ <code>URL</code> åœ°å€ä½œä¸º src æºï¼Œå¹¶ä¸”åœ¨æºæ–‡ä»¶è¢«è¯†åˆ«ä¸ºå‹ç¼©åŒ…æ—¶ï¼Œè‡ªåŠ¨è¿›è¡Œè§£å‹ï¼Œè€Œ <code>COPY</code> æ²¡æœ‰è¿™ä¸¤ä¸ªèƒ½åŠ›ã€‚</p> <p>è™½ç„¶çœ‹ä¸Šå» <code>COPY</code> èƒ½åŠ›ç¨å¼±ï¼Œä½†å¯¹äºé‚£äº›ä¸å¸Œæœ›æºæ–‡ä»¶è¢«è§£å‹æˆ–æ²¡æœ‰ç½‘ç»œè¯·æ±‚çš„åœºæ™¯ï¼ŒCOPY æŒ‡ä»¤æ˜¯ä¸ªä¸é”™çš„é€‰æ‹©ã€‚</p> <h3 id="dockerfile-æ„å»º"><a href="#dockerfile-æ„å»º" class="header-anchor">#</a> Dockerfile æ„å»º</h3> <p>æ„å»ºé•œåƒçš„å‘½ä»¤ä¸º <code>docker build</code>ã€‚</p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token function">sudo</span> docker build ./webapp
</code></pre></div><p>å¦‚æœæˆ‘ä»¬çš„ Dockerfile æ–‡ä»¶è·¯å¾„ä¸åœ¨è¿™ä¸ªç›®å½•ä¸‹ï¼Œæˆ–è€…æœ‰å¦å¤–çš„æ–‡ä»¶åï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡<code>-f</code>é€‰é¡¹å•ç‹¬ç»™å‡º Dockerfile æ–‡ä»¶çš„è·¯å¾„ã€‚</p> <div class="language-sh extra-class"><pre class="language-sh"><code>$ <span class="token function">sudo</span> docker build -t webapp:latest -f ./webapp/a.Dockerfile ./webapp

<span class="token comment"># åœ¨æ„å»ºæ—¶æˆ‘ä»¬æœ€å¥½æ€»æ˜¯æºå¸¦ä¸Š -t é€‰é¡¹ï¼Œç”¨å®ƒæ¥æŒ‡å®šæ–°ç”Ÿæˆé•œåƒçš„åç§°ã€‚</span>
$ <span class="token function">sudo</span> docker build -t webapp:latest ./webapp
</code></pre></div><h2 id="ç»„åˆåº”ç”¨"><a href="#ç»„åˆåº”ç”¨" class="header-anchor">#</a> ç»„åˆåº”ç”¨</h2> <p>ä¸€ä¸ªå®Œæ•´çš„åº”ç”¨, éœ€è¦ç”¨å¤šä¸ª docker, è¿™ä¸ªç« èŠ‚æ¥è®°å½•å¦‚ä½•ç»„å»ºç»„åˆåº”ç”¨, ä¸ºä½•é˜è¿°æ¸…æ¥š, è®²<code>docker compose</code>åˆ†ä¸ºä»¥ä¸‹å‡ ä¸ªéƒ¨åˆ†æ¥å†™:</p> <ul><li>Docker Compose é…ç½®æ–‡ä»¶</li></ul></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">æ›´æ–°æ—¶é—´:</span> <span class="time">7/21/2020, 12:37:23 AM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      â†
      <a href="/blog/skills/æŸ¥çœ‹æ—¥å¿—.html" class="prev">
        æŸ¥çœ‹æ—¥å¿—
      </a></span> <span class="next"><a href="/blog/skills/DockerForV2ray.html">
        Docker For V2ray
      </a>
      â†’
    </span></p></div> </main></div><div class="global-ui"><!----><!----></div></div>
    <script src="/blog/assets/js/app.25414947.js" defer></script><script src="/blog/assets/js/3.ab657a59.js" defer></script><script src="/blog/assets/js/17.5f2beb7f.js" defer></script><script src="/blog/assets/js/4.022282fe.js" defer></script>
  </body>
</html>
