<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>WebWorker å®è·µå°ç»“ | Lorain&#39;s ä¸ªäººä¸»é¡µğŸ–Œ</title>
    <meta name="generator" content="VuePress 1.7.1">
    <link rel="icon" href="/blog/base/hd-img.jpg">
    <link rel="manifest" href="/blog/manifest.json">
    <link rel="apple-touch-icon" href="/blog/base/hd-img.jpg">
    <meta name="description" content="å±±ä¸­æ¨—æ å¹´å¹´åœ¨ & çœ‹å°½è¥¿é£æœ¨æ§¿èŠ±">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta http-quiv="pragma" cotent="no-cache">
    <meta http-quiv="pragma" cotent="no-cache,must-revalidate">
    <meta http-quiv="expires" cotent="0">
    
    <link rel="preload" href="/blog/assets/css/0.styles.4a9580f2.css" as="style"><link rel="preload" href="/blog/assets/js/app.2bec999c.js" as="script"><link rel="preload" href="/blog/assets/js/3.8c44ca0e.js" as="script"><link rel="preload" href="/blog/assets/js/29.ce3667da.js" as="script"><link rel="preload" href="/blog/assets/js/4.57980df9.js" as="script"><link rel="prefetch" href="/blog/assets/js/10.96eb2894.js"><link rel="prefetch" href="/blog/assets/js/11.a73e4944.js"><link rel="prefetch" href="/blog/assets/js/12.e5c4df72.js"><link rel="prefetch" href="/blog/assets/js/13.f33101e6.js"><link rel="prefetch" href="/blog/assets/js/14.813b287f.js"><link rel="prefetch" href="/blog/assets/js/15.8298e73d.js"><link rel="prefetch" href="/blog/assets/js/16.42b38797.js"><link rel="prefetch" href="/blog/assets/js/17.b3e61337.js"><link rel="prefetch" href="/blog/assets/js/18.370687c1.js"><link rel="prefetch" href="/blog/assets/js/19.9b32c156.js"><link rel="prefetch" href="/blog/assets/js/20.2784d75c.js"><link rel="prefetch" href="/blog/assets/js/21.bd9385ec.js"><link rel="prefetch" href="/blog/assets/js/22.11c4fce0.js"><link rel="prefetch" href="/blog/assets/js/23.62a971ce.js"><link rel="prefetch" href="/blog/assets/js/24.269b5d98.js"><link rel="prefetch" href="/blog/assets/js/25.8c84e522.js"><link rel="prefetch" href="/blog/assets/js/26.37ed3853.js"><link rel="prefetch" href="/blog/assets/js/27.53f085d6.js"><link rel="prefetch" href="/blog/assets/js/28.96d28141.js"><link rel="prefetch" href="/blog/assets/js/30.2ea3222d.js"><link rel="prefetch" href="/blog/assets/js/31.687eced0.js"><link rel="prefetch" href="/blog/assets/js/32.29f34942.js"><link rel="prefetch" href="/blog/assets/js/33.eeeb95f1.js"><link rel="prefetch" href="/blog/assets/js/34.3bd79ede.js"><link rel="prefetch" href="/blog/assets/js/35.e25a0ae4.js"><link rel="prefetch" href="/blog/assets/js/36.3ad34381.js"><link rel="prefetch" href="/blog/assets/js/37.25b7717e.js"><link rel="prefetch" href="/blog/assets/js/38.4e9d37bf.js"><link rel="prefetch" href="/blog/assets/js/39.be1e22c8.js"><link rel="prefetch" href="/blog/assets/js/40.ebb9c65f.js"><link rel="prefetch" href="/blog/assets/js/41.31ac9d23.js"><link rel="prefetch" href="/blog/assets/js/42.09f726bf.js"><link rel="prefetch" href="/blog/assets/js/43.c704b38a.js"><link rel="prefetch" href="/blog/assets/js/44.2be6cca1.js"><link rel="prefetch" href="/blog/assets/js/5.3060fd99.js"><link rel="prefetch" href="/blog/assets/js/6.5cf5829a.js"><link rel="prefetch" href="/blog/assets/js/7.46c43574.js"><link rel="prefetch" href="/blog/assets/js/8.97b71141.js"><link rel="prefetch" href="/blog/assets/js/9.5a3cc726.js"><link rel="prefetch" href="/blog/assets/js/vendors~docsearch.8f04fa7f.js">
    <link rel="stylesheet" href="/blog/assets/css/0.styles.4a9580f2.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/blog/" class="home-link router-link-active"><!----> <span class="site-name">Lorain's ä¸ªäººä¸»é¡µğŸ–Œ</span></a> <div class="links"><form id="search-form" role="search" class="algolia-search-wrapper search-box"><input id="algolia-search-input" class="search-query"></form> <nav class="nav-links can-hide"><div class="nav-item"><a href="/blog/skills/" class="nav-link router-link-active">
  ğŸ“œæŠ€æœ¯è¿›é˜¶
</a></div><div class="nav-item"><a href="/blog/algorithm/" class="nav-link">
  ğŸ“Šç®—æ³•ç›¸å…³
</a></div><div class="nav-item"><a href="/blog/life/" class="nav-link">
  ğŸ€è®°å½•ç”Ÿæ´»
</a></div><div class="nav-item"><a href="https://github.com/lorainwings" target="_blank" rel="noopener noreferrer" class="nav-link external">
  â­ï¸Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/blog/skills/" class="nav-link router-link-active">
  ğŸ“œæŠ€æœ¯è¿›é˜¶
</a></div><div class="nav-item"><a href="/blog/algorithm/" class="nav-link">
  ğŸ“Šç®—æ³•ç›¸å…³
</a></div><div class="nav-item"><a href="/blog/life/" class="nav-link">
  ğŸ€è®°å½•ç”Ÿæ´»
</a></div><div class="nav-item"><a href="https://github.com/lorainwings" target="_blank" rel="noopener noreferrer" class="nav-link external">
  â­ï¸Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Client &amp; Side</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/skills/Base64.html" class="sidebar-link">Base64</a></li><li><a href="/blog/skills/Promise.html" class="sidebar-link">Promise</a></li><li><a href="/blog/skills/å›¾ç‰‡åˆ†ç±».html" class="sidebar-link">å›¾ç‰‡åˆ†ç±»</a></li><li><a href="/blog/skills/Rxjsåˆæ¢.html" class="sidebar-link">Rxjs åˆæ¢</a></li><li><a href="/blog/skills/Generator.html" class="sidebar-link">Generator</a></li><li><a href="/blog/skills/Set &amp; Map.html" class="sidebar-link">Set &amp; Map</a></li><li><a href="/blog/skills/Babelæ‚è°ˆ.html" class="sidebar-link">Babel æ‚è°ˆ</a></li><li><a href="/blog/skills/H5å®šä½API.html" class="sidebar-link">H5 å®šä½ API</a></li><li><a href="/blog/skills/Event-loop.html" class="sidebar-link">Event Loop</a></li><li><a href="/blog/skills/æœåŠ¡å™¨æ¨é€.html" class="sidebar-link">æœåŠ¡å™¨æ¨é€</a></li><li><a href="/blog/skills/æµè§ˆå™¨ç¼“å­˜.html" class="sidebar-link">æµè§ˆå™¨ç¼“å­˜</a></li><li><a href="/blog/skills/å‰ç«¯å®‰å…¨é˜²èŒƒ.html" class="sidebar-link">å‰ç«¯å®‰å…¨é˜²èŒƒ</a></li><li><a href="/blog/skills/åˆè¯†Typescript.html" class="sidebar-link">åˆè¯† Typescript</a></li><li><a href="/blog/skills/Git å¸¸ç”¨æŠ€å·§.html" class="sidebar-link">Git å¸¸ç”¨æŠ€å·§</a></li><li><a href="/blog/skills/Webæ€§èƒ½ä¼˜åŒ–.html" class="sidebar-link">Web æ€§èƒ½ä¼˜åŒ–</a></li><li><a href="/blog/skills/æ­£åˆ™è¡¨è¾¾å¼å°çŸ¥è¯†.html" class="sidebar-link">æ­£åˆ™è¡¨è¾¾å¼å°çŸ¥è¯†</a></li><li><a href="/blog/skills/WebWorkerå®è·µå°ç»“.html" class="active sidebar-link">WebWorker å®è·µå°ç»“</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/skills/WebWorkerå®è·µå°ç»“.html#ä¸šåŠ¡ä»£ç å’Œ-worker-ä»£ç " class="sidebar-link">ä¸šåŠ¡ä»£ç å’Œ worker ä»£ç </a></li><li class="sidebar-sub-header"><a href="/blog/skills/WebWorkerå®è·µå°ç»“.html#webworker-ä½¿ç”¨å¤–éƒ¨ä¾èµ–" class="sidebar-link">WebWorker ä½¿ç”¨å¤–éƒ¨ä¾èµ–</a></li><li class="sidebar-sub-header"><a href="/blog/skills/WebWorkerå®è·µå°ç»“.html#åœ¨-stackoverflow-ä¸­çš„å‚è€ƒ" class="sidebar-link">åœ¨ StackOverflow ä¸­çš„å‚è€ƒ</a></li></ul></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Build &amp; Tools</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Design &amp; Patterns</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Server &amp; Side</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="webworker-å®è·µå°ç»“"><a href="#webworker-å®è·µå°ç»“" class="header-anchor">#</a> WebWorker å®è·µå°ç»“</h1> <p>WebWork çš„ç‹¬ç«‹çº¿ç¨‹ä¸ºæµè§ˆå™¨çš„å¯†é›†å‹è®¡ç®—å‡è´Ÿ, å…·ä½“çš„ä»‹ç»å¯ä»¥å‚è€ƒé˜®å¤§çš„æ–‡ç« <a href="http://www.ruanyifeng.com/blog/2018/07/web-worker.html" target="_blank" rel="noopener noreferrer">Web Worker ä½¿ç”¨æ•™ç¨‹<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>, æœ¬æ–‡ä¸»è¦æ¢è®¨å¦‚ä½•åœ¨å®é™…çš„é¡¹ç›®ä¸­å¦‚ä½•ä½¿ç”¨ã€‚</p> <p>æ–‡ç« ç»“æ„ä¸»è¦åˆ†ä»¥ä¸‹ä¸¤éƒ¨åˆ†:</p> <ul><li>ä¸šåŠ¡ä»£ç å’Œ WebWorker ä»£ç </li> <li>WebWorker ä½¿ç”¨å¤–éƒ¨ä¾èµ–</li></ul> <h2 id="ä¸šåŠ¡ä»£ç å’Œ-worker-ä»£ç "><a href="#ä¸šåŠ¡ä»£ç å’Œ-worker-ä»£ç " class="header-anchor">#</a> ä¸šåŠ¡ä»£ç å’Œ worker ä»£ç </h2> <ul><li>ä¸»çº¿ç¨‹ä»£ç </li></ul> <p><strong>main.js</strong>:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// relative path to the worker from current file</span>
<span class="token keyword">import</span> Worker <span class="token keyword">from</span> <span class="token string">&quot;../../utils/sleep.worker&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> wk <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Worker</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
wk<span class="token punctuation">.</span><span class="token function">postMessage</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">&quot;data:application/json;base64,asfasdfs&quot;</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
wk<span class="token punctuation">.</span><span class="token function-variable function">onmessage</span> <span class="token operator">=</span> <span class="token parameter">d</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;ä¸»çº¿ç¨‹æ”¶åˆ°æ¶ˆæ¯!&quot;</span><span class="token punctuation">,</span> d<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><ul><li>WebWorker çº¿ç¨‹ä»£ç </li></ul> <p><strong>worker çº¿ç¨‹ä»£ç </strong>:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// use import like you would in any other file</span>
<span class="token keyword">import</span> moment <span class="token keyword">from</span> <span class="token string">&quot;moment&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">countNum</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> count <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">10000</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> <span class="token number">100000</span><span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      count<span class="token operator">++</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    count<span class="token punctuation">,</span>
    date<span class="token operator">:</span> <span class="token function">moment</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token string">&quot;YYYY-MM-DD: hh:mm:ss&quot;</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

self<span class="token punctuation">.</span><span class="token function-variable function">onmessage</span> <span class="token operator">=</span> <span class="token parameter">e</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;workerçº¿ç¨‹æ”¶åˆ°æ¶ˆæ¯&quot;</span><span class="token punctuation">,</span> e<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> res <span class="token operator">=</span> <span class="token function">countNum</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  self<span class="token punctuation">.</span><span class="token function">postMessage</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="webworker-ä½¿ç”¨å¤–éƒ¨ä¾èµ–"><a href="#webworker-ä½¿ç”¨å¤–éƒ¨ä¾èµ–" class="header-anchor">#</a> WebWorker ä½¿ç”¨å¤–éƒ¨ä¾èµ–</h2> <p>è¦è®© WebWorker ä½¿ç”¨å¤–éƒ¨ä¾èµ–, å¯ä»¥ä½¿ç”¨ Webpack æ¥åŠ è½½ç¬¬ä¸‰æ–¹åŒ…, ä¹Ÿå¯ä»¥ç›´æ¥ä½¿ç”¨åŸç”Ÿçš„<code>importScript</code>æ¥å¼•å…¥ç¬¬ä¸‰æ–¹åŒ…;</p> <h3 id="é…ç½®æ‰“åŒ…å·¥å…·"><a href="#é…ç½®æ‰“åŒ…å·¥å…·" class="header-anchor">#</a> é…ç½®æ‰“åŒ…å·¥å…·</h3> <p>æ­¤å¤„ä»¥<code>Webpack</code>ä¸ºä¾‹å­, åœ¨è¯¥æ‰“åŒ…å·¥å…·ä¸­, å¯ä»¥å°† WebWorker çš„æ¨¡å—é…ç½®ä¸ºä¸¤ç§æ–¹å¼:</p> <ul><li>é…ç½® worker ä¸º entry</li> <li>é…ç½® worker ä¸º loader</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// webpack.config.js entry</span>
modules<span class="token punctuation">.</span>exports<span class="token operator">=</span> <span class="token punctuation">{</span>
  entry<span class="token operator">:</span> <span class="token punctuation">{</span>
  main<span class="token operator">:</span> <span class="token string">'./src/app/main.js'</span>
  worker<span class="token operator">:</span> <span class="token string">'./src/utils/myWorker.js'</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  output<span class="token operator">:</span> <span class="token punctuation">{</span>
  path<span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token constant">ROOT_PATH</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/public</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
  filename<span class="token operator">:</span> <span class="token string">'[name].bundle.js'</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>å¦‚æœéœ€è¦ä½¿ç”¨ loader æ–¹å¼, å¿…é¡»å…ˆå®‰è£…ç›¸åº”çš„<code>worker-loader</code>, å…·ä½“çš„ loader ç›¸å…³ä»‹ç», è¯·ç§»æ­¥è‡³: <a href="https://webpack.js.org/loaders/worker-loader/" target="_blank" rel="noopener noreferrer">Webpack worker-loader documentation<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token function">npm</span> <span class="token function">install</span> worker-loader --save-dev
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">//With Webpack (worker-loader)</span>
<span class="token comment">//webpack.config.js</span>
modules<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  module<span class="token operator">:</span> <span class="token punctuation">{</span>
    rules<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        test<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.worker\.js$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
        use<span class="token operator">:</span> <span class="token punctuation">{</span> loader<span class="token operator">:</span> <span class="token string">&quot;worker-loader&quot;</span> <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="ç›´æ¥ä½¿ç”¨-importscript-æ¥åŠ è½½å¤–éƒ¨åŒ…"><a href="#ç›´æ¥ä½¿ç”¨-importscript-æ¥åŠ è½½å¤–éƒ¨åŒ…" class="header-anchor">#</a> ç›´æ¥ä½¿ç”¨ importScript æ¥åŠ è½½å¤–éƒ¨åŒ…</h3> <p>You can always import the library from a CDN</p> <div class="language-js extra-class"><pre class="language-js"><code>myWorker<span class="token punctuation">.</span>js<span class="token punctuation">;</span>
<span class="token function">importScripts</span><span class="token punctuation">(</span>
  <span class="token string">&quot;//cdnjs.cloudflare.com/ajax/libs/moment.js/2.24.0/moment.min.js&quot;</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">From worker: worker started at </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token function">moment</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token string">&quot;HH:mm:ss&quot;</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="åœ¨-stackoverflow-ä¸­çš„å‚è€ƒ"><a href="#åœ¨-stackoverflow-ä¸­çš„å‚è€ƒ" class="header-anchor">#</a> åœ¨ StackOverflow ä¸­çš„å‚è€ƒ</h2> <p>Other bundlers
Web workers cannot importScripts from parent folders for security reasons
The node_modules folder is usually at the root of the project so you can't access it with importScripts
The bundler needs to be configured so that the content can be aliased or copied to a location the worker can access</p> <h3 id="angularcli-and-ionic-ä½¿ç”¨"><a href="#angularcli-and-ionic-ä½¿ç”¨" class="header-anchor">#</a> AngularCLI and Ionic ä½¿ç”¨</h3> <p>For projects using webpack as a bundler the 2 webpack solutions can be adapted as long as you can access the webpack config and customize it.</p> <p>The &quot;Webpack (as entry)&quot; example was actually borrowed from Angular CLI generated app with Web Workers</p> <p>It explains how to modify the setup to bootstrap angular using web workers
It have been referenced as a webworker solution for Ionic projects too</p> <p>Note on TypeScript
you may need a separate ts config in the worker folder
Structuring a TypeScript project with workers</p> <div class="language-js extra-class"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token keyword">extends</span><span class="token operator">:</span> <span class="token string">&quot;../generic-tsconfig.json&quot;</span><span class="token punctuation">,</span>
  compilerOptions<span class="token operator">:</span> <span class="token punctuation">{</span>
    lib<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;esnext&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;webworker&quot;</span><span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">æ›´æ–°æ—¶é—´:</span> <span class="time">12/26/2020, 10:58:32 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      â†
      <a href="/blog/skills/æ­£åˆ™è¡¨è¾¾å¼å°çŸ¥è¯†.html" class="prev">
        æ­£åˆ™è¡¨è¾¾å¼å°çŸ¥è¯†
      </a></span> <span class="next"><a href="/blog/skills/ç®€æ˜“æ‰“åŒ…å·¥å…·å®ç°.html">
        ç®€æ˜“æ‰“åŒ…å·¥å…·å®ç°
      </a>
      â†’
    </span></p></div> </main></div><div class="global-ui"><!----><!----></div></div>
    <script src="/blog/assets/js/app.2bec999c.js" defer></script><script src="/blog/assets/js/3.8c44ca0e.js" defer></script><script src="/blog/assets/js/29.ce3667da.js" defer></script><script src="/blog/assets/js/4.57980df9.js" defer></script>
  </body>
</html>
