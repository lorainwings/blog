<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Crontab | Lorain&#39;s 个人主页🖌</title>
    <meta name="generator" content="VuePress 1.8.0">
    <link rel="icon" href="/blog/base/hd-img.jpg">
    <link rel="manifest" href="/blog/manifest.json">
    <link rel="apple-touch-icon" href="/blog/base/hd-img.jpg">
    <meta name="description" content="山中樗栎年年在 & 看尽西风木槿花">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta http-quiv="pragma" cotent="no-cache">
    <meta http-quiv="pragma" cotent="no-cache,must-revalidate">
    <meta http-quiv="expires" cotent="0">
    
    <link rel="preload" href="/blog/assets/css/0.styles.87f2da67.css" as="style"><link rel="preload" href="/blog/assets/js/app.f1018558.js" as="script"><link rel="preload" href="/blog/assets/js/3.c52ee6d8.js" as="script"><link rel="preload" href="/blog/assets/js/19.d94c3211.js" as="script"><link rel="preload" href="/blog/assets/js/4.58e1c0fb.js" as="script"><link rel="prefetch" href="/blog/assets/js/10.b445396e.js"><link rel="prefetch" href="/blog/assets/js/11.680efef2.js"><link rel="prefetch" href="/blog/assets/js/12.227c065e.js"><link rel="prefetch" href="/blog/assets/js/13.04df423c.js"><link rel="prefetch" href="/blog/assets/js/14.87e47d7f.js"><link rel="prefetch" href="/blog/assets/js/15.bb55af44.js"><link rel="prefetch" href="/blog/assets/js/16.273df532.js"><link rel="prefetch" href="/blog/assets/js/17.22641bd4.js"><link rel="prefetch" href="/blog/assets/js/18.d7f06b61.js"><link rel="prefetch" href="/blog/assets/js/20.112db5a6.js"><link rel="prefetch" href="/blog/assets/js/21.48bd611f.js"><link rel="prefetch" href="/blog/assets/js/22.b4e4e341.js"><link rel="prefetch" href="/blog/assets/js/23.9b239688.js"><link rel="prefetch" href="/blog/assets/js/24.88eac5ea.js"><link rel="prefetch" href="/blog/assets/js/25.7a26e38f.js"><link rel="prefetch" href="/blog/assets/js/26.5a4f0661.js"><link rel="prefetch" href="/blog/assets/js/27.94126154.js"><link rel="prefetch" href="/blog/assets/js/28.3884961f.js"><link rel="prefetch" href="/blog/assets/js/29.6ead81af.js"><link rel="prefetch" href="/blog/assets/js/30.d8042d25.js"><link rel="prefetch" href="/blog/assets/js/31.2bf738e1.js"><link rel="prefetch" href="/blog/assets/js/32.240b436a.js"><link rel="prefetch" href="/blog/assets/js/33.17e08fd4.js"><link rel="prefetch" href="/blog/assets/js/34.971f7016.js"><link rel="prefetch" href="/blog/assets/js/35.8732a71d.js"><link rel="prefetch" href="/blog/assets/js/36.2c25d5a0.js"><link rel="prefetch" href="/blog/assets/js/37.ef32e50f.js"><link rel="prefetch" href="/blog/assets/js/38.6f75348f.js"><link rel="prefetch" href="/blog/assets/js/39.7463820e.js"><link rel="prefetch" href="/blog/assets/js/40.d3fc2186.js"><link rel="prefetch" href="/blog/assets/js/41.b9f766d1.js"><link rel="prefetch" href="/blog/assets/js/42.16a843a0.js"><link rel="prefetch" href="/blog/assets/js/43.9f495238.js"><link rel="prefetch" href="/blog/assets/js/44.c94144ce.js"><link rel="prefetch" href="/blog/assets/js/45.c677b10f.js"><link rel="prefetch" href="/blog/assets/js/5.2f107941.js"><link rel="prefetch" href="/blog/assets/js/6.59be5133.js"><link rel="prefetch" href="/blog/assets/js/7.e4ed03b6.js"><link rel="prefetch" href="/blog/assets/js/8.eb981c50.js"><link rel="prefetch" href="/blog/assets/js/9.c058e0e0.js"><link rel="prefetch" href="/blog/assets/js/vendors~docsearch.cebdd0dd.js">
    <link rel="stylesheet" href="/blog/assets/css/0.styles.87f2da67.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/blog/" class="home-link router-link-active"><!----> <span class="site-name">Lorain's 个人主页🖌</span></a> <div class="links"><form id="search-form" role="search" class="algolia-search-wrapper search-box"><input id="algolia-search-input" class="search-query"></form> <nav class="nav-links can-hide"><div class="nav-item"><a href="/blog/skills/" class="nav-link router-link-active">
  📜前端技术
</a></div><div class="nav-item"><a href="/blog/algorithm/" class="nav-link">
  📊计算机基础
</a></div><div class="nav-item"><a href="/blog/life/" class="nav-link">
  🍀其他记录
</a></div><div class="nav-item"><a href="https://github.com/lorainwings" target="_blank" rel="noopener noreferrer" class="nav-link external">
  ⭐️Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/blog/skills/" class="nav-link router-link-active">
  📜前端技术
</a></div><div class="nav-item"><a href="/blog/algorithm/" class="nav-link">
  📊计算机基础
</a></div><div class="nav-item"><a href="/blog/life/" class="nav-link">
  🍀其他记录
</a></div><div class="nav-item"><a href="https://github.com/lorainwings" target="_blank" rel="noopener noreferrer" class="nav-link external">
  ⭐️Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>JS语言基础</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>H5及框架</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>前端工程化</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>安全及性能优化</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>服务端入门</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/skills/服务器推送.html" class="sidebar-link">服务器推送</a></li><li><a href="/blog/skills/Crontab.html" aria-current="page" class="active sidebar-link">Crontab</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/skills/Crontab.html#作用" class="sidebar-link">作用</a></li><li class="sidebar-sub-header"><a href="/blog/skills/Crontab.html#命令格式" class="sidebar-link">命令格式</a></li><li class="sidebar-sub-header"><a href="/blog/skills/Crontab.html#命令参数" class="sidebar-link">命令参数</a></li><li class="sidebar-sub-header"><a href="/blog/skills/Crontab.html#任务文件格式" class="sidebar-link">任务文件格式</a></li><li class="sidebar-sub-header"><a href="/blog/skills/Crontab.html#macos-开启" class="sidebar-link">macos 开启</a></li><li class="sidebar-sub-header"><a href="/blog/skills/Crontab.html#使用实例" class="sidebar-link">使用实例</a></li></ul></li><li><a href="/blog/skills/查看日志.html" class="sidebar-link">查看日志</a></li><li><a href="/blog/skills/Docker指南.html" class="sidebar-link">Docker 指南</a></li><li><a href="/blog/skills/DockerForV2ray.html" class="sidebar-link">Docker For V2ray</a></li><li><a href="/blog/skills/Nginx配置浅析.html" class="sidebar-link">Nginx 配置浅析</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="crontab"><a href="#crontab" class="header-anchor">#</a> Crontab</h1> <h2 id="作用"><a href="#作用" class="header-anchor">#</a> 作用</h2> <p><strong>crontab</strong> 命令，可以在固定的间隔时间执行指定的系统指令或 <code>shell script</code> 脚本。时间间隔的单位可以是分钟、小时、日、月、周及以上的任意组合。这个命令非常适合周期性的日志分析或数据备份等工作</p> <p>接下来的内容中将通过以下几个部分来讲解如何使用<strong>crontab</strong>：</p> <ul><li>命令格式</li> <li>命令参数</li> <li>任务文件格式</li> <li>macos 环境使用</li> <li>使用实例</li></ul> <h2 id="命令格式"><a href="#命令格式" class="header-anchor">#</a> 命令格式</h2> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token function">crontab</span> <span class="token punctuation">[</span>-u user<span class="token punctuation">]</span> <span class="token function">file</span> <span class="token function">crontab</span> <span class="token punctuation">[</span>-u user<span class="token punctuation">]</span><span class="token punctuation">[</span> -e <span class="token operator">|</span> -l <span class="token operator">|</span> -r <span class="token punctuation">]</span>
</code></pre></div><h2 id="命令参数"><a href="#命令参数" class="header-anchor">#</a> 命令参数</h2> <ul><li><code>-u</code> user：用来设定某个用户的 crontab 服务；
file：file 是命令文件的名字,表示将 file 做为 crontab 的任务列表文件并载入 crontab。如果在命令行中没有指定这个文件，crontab 命令将接受标准输入（键盘）上键入的命令，并将它们载入 crontab。</li> <li><code>-e</code>：编辑某个用户的 crontab 文件内容。如果不指定用户，则表示编辑当前用户的 crontab 文件。</li> <li><code>-l</code>：显示某个用户的 crontab 文件内容，如果不指定用户，则表示显示当前用户的 crontab 文件内容。</li> <li><code>-r</code>：从/var/spool/cron 目录中删除某个用户的 crontab 文件，如果不指定用户，则默认删除当前用户的 crontab 文件。</li> <li><code>-i</code>：在删除用户的 crontab 文件时给确认提示。</li></ul> <h2 id="任务文件格式"><a href="#任务文件格式" class="header-anchor">#</a> 任务文件格式</h2> <p>分 时 日 月 星期 要运行的命令</p> <ul><li>第 1 列分钟 0 ～ 59</li> <li>第 2 列小时 0 ～ 23（0 表示子夜）</li> <li>第 3 列日 1 ～ 31</li> <li>第 4 列月 1 ～ 12</li> <li>第 5 列星期 0 ～ 7（0 和 7 表示星期天）</li> <li>第 6 列要运行的命令</li></ul> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token comment"># 示例</span>
<span class="token number">0</span> <span class="token number">8</span>-12 * * * /root/backup.sh
</code></pre></div><h2 id="macos-开启"><a href="#macos-开启" class="header-anchor">#</a> macos 开启</h2> <p>在<code>macos</code>环境中首先要检查是否已经安装了<code>crontab</code>, 使用如下命令查看:</p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token comment"># 查看</span>
<span class="token function">sudo</span> launchctl list <span class="token operator">|</span> <span class="token function">grep</span> <span class="token function">cron</span>
<span class="token comment"># 如第一步不存在这新建crontab</span>
<span class="token function">sudo</span> <span class="token function">touch</span> /etc/crontab
<span class="token comment"># 编辑crontab任务</span>
<span class="token function">crontab</span> -e
</code></pre></div><p>同时, 在<code>macos</code>环境中常用的开启重启的命令:</p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token function">sudo</span> /usr/sbin/cron start
<span class="token function">sudo</span> /usr/sbin/cron restart
<span class="token function">sudo</span> /usr/sbin/cron stop
</code></pre></div><h2 id="使用实例"><a href="#使用实例" class="header-anchor">#</a> 使用实例</h2> <h3 id="实例-1-每-1-分钟执行一次-mycommand"><a href="#实例-1-每-1-分钟执行一次-mycommand" class="header-anchor">#</a> 实例 1：每 1 分钟执行一次 myCommand</h3> <p><code>* * * * * myCommand</code></p> <h3 id="实例-2-每小时的第-3-和第-15-分钟执行"><a href="#实例-2-每小时的第-3-和第-15-分钟执行" class="header-anchor">#</a> 实例 2：每小时的第 3 和第 15 分钟执行</h3> <p><code>3,15 \* \* \* _ myCommand</code></p> <h3 id="实例-3-在上午-8-点到-11-点的第-3-和第-15-分钟执行"><a href="#实例-3-在上午-8-点到-11-点的第-3-和第-15-分钟执行" class="header-anchor">#</a> 实例 3：在上午 8 点到 11 点的第 3 和第 15 分钟执行</h3> <p><code>3,15 8-11 _ \* _ myCommand</code></p> <h3 id="实例-4-每隔两天的上午-8-点到-11-点的第-3-和第-15-分钟执行"><a href="#实例-4-每隔两天的上午-8-点到-11-点的第-3-和第-15-分钟执行" class="header-anchor">#</a> 实例 4：每隔两天的上午 8 点到 11 点的第 3 和第 15 分钟执行</h3> <p><code>3,15 8-11 _/2 \* _ myCommand</code></p> <h4 id="实例-5-每周一上午-8-点到-11-点的第-3-和第-15-分钟执行"><a href="#实例-5-每周一上午-8-点到-11-点的第-3-和第-15-分钟执行" class="header-anchor">#</a> 实例 5：每周一上午 8 点到 11 点的第 3 和第 15 分钟执行</h4> <p><code>3,15 8-11 _ _ 1 myCommand</code></p> <h4 id="实例-6-每晚的-21-30-重启-smb"><a href="#实例-6-每晚的-21-30-重启-smb" class="header-anchor">#</a> 实例 6：每晚的 21:30 重启 smb</h4> <p><code>30 21 _ \* \* /etc/init.d/smb restart</code></p></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">更新时间:</span> <span class="time">1/26/2021, 3:35:55 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/blog/skills/服务器推送.html" class="prev">
        服务器推送
      </a></span> <span class="next"><a href="/blog/skills/查看日志.html">
        查看日志
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----><!----></div></div>
    <script src="/blog/assets/js/app.f1018558.js" defer></script><script src="/blog/assets/js/3.c52ee6d8.js" defer></script><script src="/blog/assets/js/19.d94c3211.js" defer></script><script src="/blog/assets/js/4.58e1c0fb.js" defer></script>
  </body>
</html>
