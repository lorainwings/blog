<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Babel æ‚è°ˆ | Lorain&#39;s Diary</title>
    <meta name="generator" content="VuePress 1.7.1">
    <link rel="icon" href="/blog/base/hd-img.jpg">
    <link rel="manifest" href="/blog/manifest.json">
    <link rel="apple-touch-icon" href="/blog/base/hd-img.jpg">
    <meta name="description" content="å±±ä¸­æ¨—æ å¹´å¹´åœ¨ & çœ‹å°½è¥¿é£æœ¨æ§¿èŠ±">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta http-quiv="pragma" cotent="no-cache">
    <meta http-quiv="pragma" cotent="no-cache,must-revalidate">
    <meta http-quiv="expires" cotent="0">
    
    <link rel="preload" href="/blog/assets/css/0.styles.4a9580f2.css" as="style"><link rel="preload" href="/blog/assets/js/app.9ee20128.js" as="script"><link rel="preload" href="/blog/assets/js/3.8c44ca0e.js" as="script"><link rel="preload" href="/blog/assets/js/17.45db52d8.js" as="script"><link rel="preload" href="/blog/assets/js/4.57980df9.js" as="script"><link rel="prefetch" href="/blog/assets/js/10.930d1339.js"><link rel="prefetch" href="/blog/assets/js/11.cdeb8098.js"><link rel="prefetch" href="/blog/assets/js/12.c8cde42b.js"><link rel="prefetch" href="/blog/assets/js/13.a227fbb7.js"><link rel="prefetch" href="/blog/assets/js/14.6af4650a.js"><link rel="prefetch" href="/blog/assets/js/15.6eaa9661.js"><link rel="prefetch" href="/blog/assets/js/16.061f9c22.js"><link rel="prefetch" href="/blog/assets/js/18.5f9597d2.js"><link rel="prefetch" href="/blog/assets/js/19.b4ea0dfc.js"><link rel="prefetch" href="/blog/assets/js/20.7f19d52d.js"><link rel="prefetch" href="/blog/assets/js/21.d8589558.js"><link rel="prefetch" href="/blog/assets/js/22.f566dc38.js"><link rel="prefetch" href="/blog/assets/js/23.b69d67c8.js"><link rel="prefetch" href="/blog/assets/js/24.643b50bd.js"><link rel="prefetch" href="/blog/assets/js/25.31cd7e03.js"><link rel="prefetch" href="/blog/assets/js/26.e8823c82.js"><link rel="prefetch" href="/blog/assets/js/27.a7430202.js"><link rel="prefetch" href="/blog/assets/js/28.d8ebaaa5.js"><link rel="prefetch" href="/blog/assets/js/29.4c8e906e.js"><link rel="prefetch" href="/blog/assets/js/30.ae43da30.js"><link rel="prefetch" href="/blog/assets/js/31.75349241.js"><link rel="prefetch" href="/blog/assets/js/32.9b6fe64e.js"><link rel="prefetch" href="/blog/assets/js/33.4259a063.js"><link rel="prefetch" href="/blog/assets/js/34.4e487b39.js"><link rel="prefetch" href="/blog/assets/js/35.5844e768.js"><link rel="prefetch" href="/blog/assets/js/36.cd999bec.js"><link rel="prefetch" href="/blog/assets/js/37.3d9a9f24.js"><link rel="prefetch" href="/blog/assets/js/38.e4fa97e3.js"><link rel="prefetch" href="/blog/assets/js/39.8ba92439.js"><link rel="prefetch" href="/blog/assets/js/40.3e0a8f49.js"><link rel="prefetch" href="/blog/assets/js/41.55113ca5.js"><link rel="prefetch" href="/blog/assets/js/42.f350e725.js"><link rel="prefetch" href="/blog/assets/js/43.94613343.js"><link rel="prefetch" href="/blog/assets/js/44.ec233cc6.js"><link rel="prefetch" href="/blog/assets/js/45.555be71a.js"><link rel="prefetch" href="/blog/assets/js/46.03a26959.js"><link rel="prefetch" href="/blog/assets/js/47.b29d5306.js"><link rel="prefetch" href="/blog/assets/js/48.cd893ec3.js"><link rel="prefetch" href="/blog/assets/js/49.12210cfc.js"><link rel="prefetch" href="/blog/assets/js/5.5d055cab.js"><link rel="prefetch" href="/blog/assets/js/50.ddcb3929.js"><link rel="prefetch" href="/blog/assets/js/51.ec0a7d07.js"><link rel="prefetch" href="/blog/assets/js/52.73a630cf.js"><link rel="prefetch" href="/blog/assets/js/53.989d0b51.js"><link rel="prefetch" href="/blog/assets/js/6.5cf5829a.js"><link rel="prefetch" href="/blog/assets/js/7.46c43574.js"><link rel="prefetch" href="/blog/assets/js/8.97b71141.js"><link rel="prefetch" href="/blog/assets/js/9.5a3cc726.js"><link rel="prefetch" href="/blog/assets/js/vendors~docsearch.8f04fa7f.js">
    <link rel="stylesheet" href="/blog/assets/css/0.styles.4a9580f2.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/blog/" class="home-link router-link-active"><!----> <span class="site-name">Lorain's Diary</span></a> <div class="links"><form id="search-form" role="search" class="algolia-search-wrapper search-box"><input id="algolia-search-input" class="search-query"></form> <nav class="nav-links can-hide"><div class="nav-item"><a href="/blog/skills/" class="nav-link router-link-active">
  ğŸ“œå‰ç«¯æŠ€æœ¯
</a></div><div class="nav-item"><a href="/blog/algorithm/" class="nav-link">
  ğŸ“Šè®¡ç®—æœºåŸºç¡€
</a></div><div class="nav-item"><a href="/blog/life/" class="nav-link">
  ğŸ€å…¶ä»–è®°å½•
</a></div><div class="nav-item"><a href="https://github.com/lorainwings" target="_blank" rel="noopener noreferrer" class="nav-link external">
  â­ï¸Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/blog/skills/" class="nav-link router-link-active">
  ğŸ“œå‰ç«¯æŠ€æœ¯
</a></div><div class="nav-item"><a href="/blog/algorithm/" class="nav-link">
  ğŸ“Šè®¡ç®—æœºåŸºç¡€
</a></div><div class="nav-item"><a href="/blog/life/" class="nav-link">
  ğŸ€å…¶ä»–è®°å½•
</a></div><div class="nav-item"><a href="https://github.com/lorainwings" target="_blank" rel="noopener noreferrer" class="nav-link external">
  â­ï¸Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>JSè¯­è¨€åŸºç¡€</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>H5åŠæ¡†æ¶</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>å‰ç«¯å·¥ç¨‹åŒ–</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/skills/Babelæ‚è°ˆ.html" class="active sidebar-link">Babel æ‚è°ˆ</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/skills/Babelæ‚è°ˆ.html#æ ¸å¿ƒæ¨¡å—" class="sidebar-link">æ ¸å¿ƒæ¨¡å—</a></li><li class="sidebar-sub-header"><a href="/blog/skills/Babelæ‚è°ˆ.html#æ¨¡å—åŠŸèƒ½åŒºåˆ†" class="sidebar-link">æ¨¡å—åŠŸèƒ½åŒºåˆ†</a></li><li class="sidebar-sub-header"><a href="/blog/skills/Babelæ‚è°ˆ.html#babel-é…ç½®" class="sidebar-link">babel é…ç½®</a></li><li class="sidebar-sub-header"><a href="/blog/skills/Babelæ‚è°ˆ.html#babel7-4-åŠä»¥ä¸Š-æœ€æ–°æ›´æ–°" class="sidebar-link">babel7.4 åŠä»¥ä¸Š æœ€æ–°æ›´æ–°</a></li><li class="sidebar-sub-header"><a href="/blog/skills/Babelæ‚è°ˆ.html#babel-runtime-babel-runtime-corejs2-babel-runtime-corejs3-åŒºåˆ«" class="sidebar-link">@babel/runtime &amp; @babel/runtime-corejs2 &amp; @babel/runtime-corejs3 åŒºåˆ«</a></li><li class="sidebar-sub-header"><a href="/blog/skills/Babelæ‚è°ˆ.html#npm-scope" class="sidebar-link">Npm-scope</a></li><li class="sidebar-sub-header"><a href="/blog/skills/Babelæ‚è°ˆ.html#å‚è€ƒæ–‡ä»¶" class="sidebar-link">å‚è€ƒæ–‡ä»¶</a></li></ul></li><li><a href="/blog/skills/ç®€æ˜“æ‰“åŒ…å·¥å…·å®ç°.html" class="sidebar-link">ç®€æ˜“æ‰“åŒ…å·¥å…·å®ç°</a></li><li><a href="/blog/skills/WebpackåŸºç¡€çŸ¥è¯†.html" class="sidebar-link">Webpack åŸºç¡€çŸ¥è¯†</a></li><li><a href="/blog/skills/Webpackæ¨¡å—å®ç°.html" class="sidebar-link">Webpack æ¨¡å—å®ç°</a></li><li><a href="/blog/skills/Webpackå¼‚æ­¥åŠ è½½.html" class="sidebar-link">Webpack å¼‚æ­¥åŠ è½½</a></li><li><a href="/blog/skills/Webpackæºç æµç¨‹åˆ†æ.html" class="sidebar-link">Webpack æºç æµç¨‹åˆ†æ</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>å®‰å…¨åŠæ€§èƒ½ä¼˜åŒ–</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>æœåŠ¡ç«¯å…¥é—¨</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="babel-æ‚è°ˆ"><a href="#babel-æ‚è°ˆ" class="header-anchor">#</a> Babel æ‚è°ˆ</h1> <p>æœ¬æ–‡ä¸»è¦è®²è¿°çš„æ˜¯ <code>babel6</code> çš„å†…å®¹, ä¸»è¦æ–¹ä¾¿äºæ›´åŠ äº†è§£ babel çš„å†å², å…¶ä¸­ä¼šç©¿æ’è¿™è®² <code>babel7</code> æ—¶ä»£çš„é…ç½®æ–¹æ³•</p> <h2 id="æ ¸å¿ƒæ¨¡å—"><a href="#æ ¸å¿ƒæ¨¡å—" class="header-anchor">#</a> æ ¸å¿ƒæ¨¡å—</h2> <p><img src="/blog/skills/images/babel.jpg" alt="avatar"></p> <p>æ ¸å¿ƒæ¨¡å—åŒ…å«ä»¥ä¸‹å‡ ä¸ª:</p> <ul><li><code>babel-core</code>: ä»…ä»…ç”¨ä½œè¯­æ³•è½¬åŒ–æˆ ast çš„ä¸€ä¸ªåŒ…</li> <li><code>babel-cli</code>: åŒ…å«ä¸¤ä¸ªå‘½ä»¤è¡Œå·¥å…·</li> <li><code>babel-runtime</code>: åŒ…å« babel æ ¸å¿ƒä»£ç , helpes, polyfill ç­‰</li></ul> <h3 id="babel-core"><a href="#babel-core" class="header-anchor">#</a> babel-core</h3> <p>æ­¤å¤„ä¸è®°å½•, ä¸»è¦æ˜¯è½¬æ¢æŠ½è±¡è¯­æ³•æ ‘</p> <h3 id="babel-cli"><a href="#babel-cli" class="header-anchor">#</a> babel-cli</h3> <p>ä¸»è¦åŒ…å«ä»¥ä¸‹æ¨¡å—:</p> <ul><li>babel-node</li> <li>babel-external-helps</li></ul> <h4 id="babel-node"><a href="#babel-node" class="header-anchor">#</a> babel-node</h4> <p>babel-cli ä¸‹é¢çš„ä¸€ä¸ª commandï¼Œä¸»è¦æ˜¯å®ç°äº† node æ‰§è¡Œè„šæœ¬å’Œå‘½ä»¤è¡Œå†™ä»£ç çš„èƒ½åŠ›ã€‚</p> <div class="language-sh extra-class"><pre class="language-sh"><code>node_modules/.bin/babel-node --presets react test.js
</code></pre></div><p>--presets react æ˜¯å‚æ•°ï¼Œç­‰åŒäº</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">{</span> <span class="token string">&quot;presets&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;react&quot;</span><span class="token punctuation">]</span> <span class="token punctuation">}</span> <span class="token comment">//éœ€è¦å®‰è£…babel-preset-react</span>
</code></pre></div><p>babel-node åˆåŒ…å«äº† <code>babel-register</code> å®æ—¶ç¼–è¯‘æ¨¡å—</p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token function">npm</span> <span class="token function">install</span> babel-register --save-dev
</code></pre></div><p>babel-node å¯ä»¥é€šè¿‡å®ƒç¼–è¯‘ä»£ç ï¼Œå¯ä»¥äº†è§£åˆ°ï¼Œå®ƒå…¶å®å°±æ˜¯ä¸€ä¸ªç¼–è¯‘å™¨ã€‚æˆ‘ä»¬åŒæ ·å¯ä»¥åœ¨ä»£ç ä¸­å¼•å…¥å®ƒ require('babel-register')ï¼Œå¹¶é€šè¿‡ node æ‰§è¡Œæˆ‘ä»¬çš„ä»£ç ã€‚</p> <p>å®ƒçš„åŸç†æ˜¯é€šè¿‡æ”¹å†™ node æœ¬èº«çš„ requireï¼Œæ·»åŠ é’©å­ï¼Œç„¶ååœ¨ require å…¶ä»–æ¨¡å—çš„æ—¶å€™ï¼Œå°±ä¼šè§¦å‘ babel ç¼–è¯‘ã€‚ä¹Ÿå°±æ˜¯ä½ å¼•å…¥ require('babel-register')çš„æ–‡ä»¶ä»£ç ï¼Œæ˜¯ä¸ä¼šè¢«ç¼–è¯‘çš„ã€‚åªæœ‰é€šè¿‡ require å¼•å…¥çš„å…¶ä»–ä»£ç æ‰ä¼šã€‚æˆ‘ä»¬æ˜¯ä¸æ˜¯å¯ä»¥ç†è§£ï¼Œbabel-node å°±æ˜¯åœ¨å†…å­˜ä¸­å†™å…¥ä¸€ä¸ªä¸´æ—¶æ–‡ä»¶ï¼Œåœ¨é¡¶éƒ¨å¼•å…¥ babel-registerï¼Œç„¶åå†å¼•å…¥æˆ‘ä»¬çš„è„šæœ¬æˆ–è€…ä»£ç ï¼Ÿ</p> <p>ä¸¾ä¸ªæ —å­ï¼Œè¿˜æ˜¯ node ä¸­æ‰§è¡Œ jsxï¼Œè¦é€šè¿‡ babel ç¼–è¯‘ã€‚æˆ‘ä»¬å¯ä»¥æŠŠ jsx çš„ä»£ç  a.js ç¼–è¯‘å®Œè¾“å‡ºåˆ°ä¸€ä¸ª b.jsï¼Œç„¶å node b.js ä¹Ÿæ˜¯å¯ä»¥æ‰§è¡Œçš„ã€‚ä½†æ˜¯å¤ªéº»çƒ¦ï¼Œä¸åˆ©äºå¼€å‘ã€‚è®©æˆ‘ä»¬çœ‹ä¸€ä¸‹é€šè¿‡ register æ€ä¹ˆç”¨</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// register.js å¼•å…¥ babel-registerï¼Œå¹¶é…ç½®ã€‚ç„¶åå¼•å…¥è¦æ‰§è¡Œä»£ç çš„å…¥å£æ–‡ä»¶</span>

<span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'babel-register'</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">{</span> presets<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'react'</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./test'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// test.js è¿™ä¸ªæ–‡ä»¶æ˜¯ jsx...</span>
<span class="token keyword">const</span> React <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'react'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> elements <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span><span class="token punctuation">{</span>item<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>elements<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><div class="language-sh extra-class"><pre class="language-sh"><code>node register.js  // æ‰§è¡Œ
</code></pre></div><h4 id="babel-external-helps"><a href="#babel-external-helps" class="header-anchor">#</a> babel-external-helps</h4> <p>ä¸»è¦ç”¨æ¥ç”Ÿæˆä¸€æ®µä»£ç ï¼ŒåŒ…å« babel æ‰€æœ‰çš„ helper è¾…åŠ©å‡½æ•°, å¦‚æœä½¿ç”¨äº† transform-runtime æ¨¡å—,å°±ä¸éœ€è¦è¯¥ å•ç‹¬ç”Ÿæˆè¯¥ helps äº†</p> <p><strong>ç”Ÿæˆæ–¹æ³•:</strong></p> <ul><li>æ‰§è¡Œ babel-external-helpers ç”Ÿæˆ helpers.js æ–‡ä»¶ï¼Œ</li></ul> <div class="language-sh extra-class"><pre class="language-sh"><code>node_modules/.bin/babel-external-helpers <span class="token operator">&gt;</span> helpers.js
æ³¨æ„ï¼šç¤ºä¾‹ä»£ç çš„åŒ…éƒ½æ˜¯è£…åˆ°é¡¹ç›®ä¸­çš„ï¼Œä¹Ÿå°±æ˜¯æœ¬åœ°ã€‚åŒæ ·ä½ å¯ä»¥å…¨å±€å®‰è£…ç›´æ¥æ‰§è¡Œã€‚
</code></pre></div><ul><li>å®‰è£… plugin</li></ul> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token function">npm</span> <span class="token function">install</span> --save-dev babel-plugin-external-helpers
</code></pre></div><ul><li>ç„¶ååœ¨ babel çš„é…ç½®æ–‡ä»¶åŠ å…¥</li></ul> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
<span class="token property">&quot;plugins&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;external-helpers&quot;</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>å…¥å£æ–‡ä»¶å¼•å…¥ helpers.js</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./helpers.js'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="babel-runtime"><a href="#babel-runtime" class="header-anchor">#</a> babel-runtime</h3> <div class="custom-block warning"><p class="custom-block-title">æ³¨æ„</p> <p>æ³¨æ„ä½¿ç”¨ä¸­éœ€è¦å¼•å…¥åˆ°<code>è¿è¡Œä¾èµ–</code>dependencis ä¸­:</p></div> <p>babel-runtime ä¸­ä¸»è¦åŒ…æ‹¬</p> <ul><li><p>æ ¸å¿ƒåº“ coreï¼ˆä¸»è¦çš„è¯­æ³• è½¬æ¢å®ç°ï¼‰</p></li> <li><p>è¾…åŠ©å‡½æ•° helpsï¼ˆè°ƒç”¨ä¸­é—´è½¬æ¢çš„è¾…åŠ©å‡½æ•°ï¼‰</p></li> <li><p>regenerateï¼ˆå®ç°äº† generator/yeildï¼Œ async/awaitï¼‰</p></li></ul> <p>ä½¿ç”¨æ–¹å¼:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">{</span>
    <span class="token string">&quot;plugins&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">[</span><span class="token string">&quot;transform-runtime&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
        <span class="token string">&quot;helpers&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        <span class="token string">&quot;polyfill&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        <span class="token string">&quot;regenerator&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        <span class="token string">&quot;moduleName&quot;</span><span class="token operator">:</span> <span class="token string">&quot;babel-runtime&quot;</span>
        <span class="token punctuation">}</span><span class="token punctuation">]</span>
    <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="æ¨¡å—åŠŸèƒ½åŒºåˆ†"><a href="#æ¨¡å—åŠŸèƒ½åŒºåˆ†" class="header-anchor">#</a> æ¨¡å—åŠŸèƒ½åŒºåˆ†</h2> <p>é—®é¢˜: <code>transform-runtime</code>å’Œ<code>babel-polyfill</code>éƒ½èƒ½è½¬æ¢ä»£ç , å®ƒä»¬çš„åŒºåˆ«æ˜¯ä»€ä¹ˆ?</p> <p><strong>babel-polyfill</strong></p> <blockquote><p>æ˜¯ä¸€ä¸ªå®Œæ•´çš„ es2015+ç¯å¢ƒ, åŒ…å«æ‰€æœ‰çš„ polyfill, åœ¨ babel6 æ—¶ä»£, å¦‚æœéœ€è¦ä¼˜åŒ–åŒ…çš„ä½“ç§¯, å¿…é¡»æ‰‹åŠ¨å¼•å…¥ helps;è€Œ babel7 æ—¶ä»£çš„ä»Šå¤©, è¿™ä¸ªå·²ç»æˆä¸ºè¿‡å»å¼;</p> <p><strong>ä¸»è¦ä½¿ç”¨åœºæ™¯æ˜¯ç”¨äºä¸€ä¸ª å¤§å‹å®Œæ•´çš„ web åº”ç”¨ä¸­</strong></p></blockquote> <p><strong>transform-runtime</strong></p> <blockquote><p>transform-runtime åŒ…æ˜¯åˆ©ç”¨ plugin è‡ªåŠ¨è¯†åˆ«å¹¶æ›¿æ¢ä»£ç ä¸­çš„æ–°ç‰¹æ€§ï¼Œä½ ä¸éœ€è¦å†å¼•å…¥ï¼Œåªéœ€è¦è£…å¥½ babel-runtime å’Œ é…å¥½ plugin å°±å¯ä»¥äº†ã€‚å¥½å¤„æ˜¯æŒ‰éœ€æ›¿æ¢ï¼Œæ£€æµ‹åˆ°ä½ éœ€è¦å“ªä¸ªï¼Œå°±å¼•å…¥å“ªä¸ª polyfillï¼Œå¦‚æœåªç”¨äº†ä¸€éƒ¨åˆ†ï¼Œæ‰“åŒ…å®Œçš„æ–‡ä»¶ä½“ç§¯å¯¹æ¯” babel-polyfill ä¼šå°å¾ˆå¤šã€‚è€Œä¸” transform-runtime ä¸ä¼šæ±¡æŸ“åŸç”Ÿçš„å¯¹è±¡,ä½†æ˜¯ç¼ºå¤±äº† es6+ ä¸€äº›å®ä¾‹æ–¹æ³•,æ¯”å¦‚ æ•°ç»„çš„ includes, filter, fill; <em>å¯ä»¥ç†è§£ä¸ºæ˜¯ä¸æ±¡æŸ“çš„ polyfill</em></p> <p><strong>ä¸»è¦ä½¿ç”¨åœºæ™¯æ˜¯ç¬¬ä¸‰æ–¹å¼€å‘å·¥å…·æˆ–è€…åº“çš„å¼€å‘</strong></p></blockquote> <p>å› ä¸º babel ç¼–è¯‘ es6 åˆ° es5 çš„è¿‡ç¨‹ä¸­ï¼Œbabel-plugin-transform-runtime è¿™ä¸ªæ’ä»¶ä¼šè‡ªåŠ¨ polyfill es5 ä¸æ”¯æŒçš„ç‰¹æ€§ï¼Œè¿™äº› polyfill åŒ…å°±æ˜¯åœ¨ babel-runtime è¿™ä¸ªåŒ…é‡Œï¼Œæ‰€ä»¥ babel-runtime éœ€è¦å®‰è£…åœ¨ dependency è€Œä¸æ˜¯ devDependencyã€‚</p> <p>dependency å’Œ devDependency åº”è¯¥èƒ½æ˜ç™½å§ã€‚å‡å¦‚ä¸€ä¸ªç”¨æˆ· npm install äº†ä½ å‘å¸ƒåœ¨ npm ä¸Šçš„ä¸€ä¸ªåŒ…ï¼Œä»–åªä¼šå®‰è£…è¿™ä¸ªåŒ…çš„ dependency ä¾èµ–ï¼ŒdevDependency æ˜¯ä¸ä¼šå®‰è£…çš„ï¼Œé‚£ä¹ˆæ­¤æ—¶å‡å¦‚ babel-runtime æ˜¯å®‰è£…åœ¨ devDependency çš„è¯ï¼Œæœ‰äº› polyfill å°±ä¼šæ‰¾ä¸åˆ°äº†ã€‚</p> <p><strong>plugin-transform-runtimee</strong></p> <blockquote><p>ä¸€ä¸ªæ’ä»¶ã€‚ babel ç¼–è¯‘åçš„ä»£ç æ˜¯åŒ…å«äº†å¤šä¸ªé‡å¤çš„å¸®åŠ©å‡½æ•°(helps ä»£ç )è€Œè¯¥æ’ä»¶å°±æ˜¯å°†è¿™äº›é‡å¤çš„ä»£ç é€šè¿‡å¼•å…¥å…¬å…±çš„ helps æ¥è§£å†³çš„(ä» babel/runtime ä¸­å¼•å…¥)</p></blockquote> <h2 id="babel-é…ç½®"><a href="#babel-é…ç½®" class="header-anchor">#</a> babel é…ç½®</h2> <p>æˆ‘å°†è¿™å—åˆ†ä¸ºå‡ éƒ¨åˆ†:</p> <ul><li>presets å’Œ plugin åŒºåˆ«</li> <li>presets å’Œ plugin çš„æ’åº</li> <li>babel6 çš„é…ç½®</li> <li>babel7 corejs2 çš„é…ç½®</li></ul> <h3 id="presets-å’Œ-plugin-åŒºåˆ«"><a href="#presets-å’Œ-plugin-åŒºåˆ«" class="header-anchor">#</a> presets å’Œ plugin åŒºåˆ«</h3> <p>presets å°±æ˜¯ plugins çš„ç»„åˆï¼Œä½ ä¹Ÿå¯ä»¥ç†è§£ä¸ºæ˜¯å¥—é¤,ç°åœ¨ä¸»æµçš„å‡ ä¸ª presets ä¸º <code>babel-presets-env</code>,è€Œ babel-presets-env ä¸»è¦æ˜¯åŸºæœ¬è¯­æ³•çš„è½¬åŒ–,å¹¶ä¸åŒ…å«ä»»ä½• polyfill, å¯ä»¥çœ‹åšæ˜¯ babel-core</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">{</span> <span class="token string">&quot;presets&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;latest&quot;</span><span class="token punctuation">]</span> <span class="token punctuation">}</span> <span class="token operator">===</span> <span class="token punctuation">{</span> <span class="token string">&quot;presets&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;env&quot;</span><span class="token punctuation">]</span> <span class="token punctuation">}</span>
</code></pre></div><h3 id="presets-å’Œ-plugin-çš„æ’åº"><a href="#presets-å’Œ-plugin-çš„æ’åº" class="header-anchor">#</a> presets å’Œ plugin çš„æ’åº</h3> <p>å…·ä½“è€Œè¨€ï¼Œplugins ä¼˜å…ˆäº presets è¿›è¡Œç¼–è¯‘ã€‚
plugins æŒ‰ç…§æ•°ç»„çš„ index å¢åº(ä»æ•°ç»„ç¬¬ä¸€ä¸ªåˆ°æœ€åä¸€ä¸ª)è¿›è¡Œç¼–è¯‘ã€‚
presets æŒ‰ç…§æ•°ç»„çš„ index å€’åº(ä»æ•°ç»„æœ€åä¸€ä¸ªåˆ°ç¬¬ä¸€ä¸ª)è¿›è¡Œç¼–è¯‘ã€‚</p> <h3 id="babel6-çš„-é…ç½®"><a href="#babel6-çš„-é…ç½®" class="header-anchor">#</a> Babel6 çš„ é…ç½®</h3> <p>ä¸»è¦åˆ†ä¸º <code>env+polyfill+useBuiltIns+helps</code> å’Œ <code>env+transform-runtime</code> ä¸¤å¥—æ–¹æ¡ˆ</p> <ul><li><code>env+polyfill+useBuiltIns+helps</code>çš„é…ç½®å¦‚ä¸‹:</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">{</span>
  <span class="token string">&quot;presets&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">[</span>
      <span class="token string">&quot;env&quot;</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        <span class="token string">&quot;targets&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token comment">// é…æ”¯æŒçš„ç¯å¢ƒ</span>
          <span class="token string">&quot;browsers&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token comment">// æµè§ˆå™¨</span>
            <span class="token string">&quot;last 2 versions&quot;</span><span class="token punctuation">,</span>
            <span class="token string">&quot;safari &gt;= 7&quot;</span>
          <span class="token punctuation">]</span><span class="token punctuation">,</span>
          <span class="token string">&quot;node&quot;</span><span class="token operator">:</span> <span class="token string">&quot;current&quot;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token string">&quot;modules&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>  <span class="token comment">//è®¾ç½®ES6 æ¨¡å—è½¬è¯‘çš„æ¨¡å—æ ¼å¼ é»˜è®¤æ˜¯ commonjs</span>
        <span class="token string">&quot;debug&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// debugï¼Œç¼–è¯‘çš„æ—¶å€™ console</span>
        <span class="token string">&quot;useBuiltIns&quot;</span><span class="token operator">:</span> <span class="token string">'useage|entry'</span><span class="token punctuation">,</span> <span class="token comment">// æ˜¯å¦å¼€å¯è‡ªåŠ¨æ”¯æŒ polyfill</span>
        <span class="token string">&quot;include&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">// æ€»æ˜¯å¯ç”¨å“ªäº› plugins</span>
        <span class="token string">&quot;exclude&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>  <span class="token comment">// å¼ºåˆ¶ä¸å¯ç”¨å“ªäº› pluginsï¼Œç”¨æ¥é˜²æ­¢æŸäº›æ’ä»¶è¢«å¯ç”¨</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  plugin<span class="token operator">:</span><span class="token punctuation">[</span><span class="token string">'external-helps'</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>

<span class="token comment">// éœ€è¦å®‰è£…å¼€å‘æ—¶çš„ä¾èµ– babel-extenal-helps ç„¶åç”Ÿæˆhelps</span>
<span class="token comment">// è¿˜éœ€åœ¨å…¥å£æ–‡ä»¶å¼•å…¥ require('babel-polyfill')</span>
<span class="token comment">// è¿˜éœ€åœ¨å…¥å£æ–‡ä»¶å¼•å…¥ç”Ÿæˆçš„helps  require('./helps')</span>
</code></pre></div><ul><li><code>env+transform-runtime</code>çš„é…ç½®å¦‚ä¸‹:</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// éœ€è¦å®‰è£…å¼€å‘ä¾èµ–babel-plugin-transform-runtime   (babel7ä½¿ç”¨@babel/plugin-transform-runtime)ã€‚</span>
<span class="token comment">// åŒæ—¶è¿˜éœ€è¦å®‰è£…ç”Ÿäº§ç¯å¢ƒçš„ä¾èµ– babel-runtime  (babel7ä½¿ç”¨@babel/runtime)</span>
<span class="token punctuation">{</span>
  <span class="token string">&quot;presets&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token string">&quot;env&quot;</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token string">&quot;plugins&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">[</span><span class="token string">&quot;transform-runtime&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
      <span class="token string">&quot;helpers&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      <span class="token string">&quot;polyfill&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      <span class="token string">&quot;regenerator&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      <span class="token string">&quot;moduleName&quot;</span><span class="token operator">:</span> <span class="token string">&quot;babel-runtime&quot;</span>
    <span class="token punctuation">}</span><span class="token punctuation">]</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="babel7-corejs2-çš„-é…ç½®"><a href="#babel7-corejs2-çš„-é…ç½®" class="header-anchor">#</a> Babel7 corejs2 çš„ é…ç½®</h3> <ul><li><strong>å…¨é¢æ–¹æ¡ˆ</strong></li></ul> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token function">yarn</span> <span class="token function">add</span> babel-loader@8 @babel/core @babel/preset-env -D
<span class="token function">yarn</span> <span class="token function">add</span> @babel/polyfil
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  presets<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">[</span>
      <span class="token string">'@babel/preset-env'</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        modules<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment">// æ¨è</span>
        useBuiltIns<span class="token operator">:</span> <span class="token string">'entry'</span><span class="token punctuation">,</span> <span class="token comment">// æ¨è</span>
        corejs<span class="token operator">:</span> <span class="token number">2</span> <span class="token comment">// æ–°ç‰ˆæœ¬çš„@babel/polyfillåŒ…å«äº†core-js@2å’Œcore-js@3ç‰ˆæœ¬ï¼Œæ‰€ä»¥éœ€è¦å£°æ˜ç‰ˆæœ¬ï¼Œå¦åˆ™webpackè¿è¡Œæ—¶ä¼šæŠ¥warningï¼Œæ­¤å¤„æš‚æ—¶ä½¿ç”¨core-js@2ç‰ˆæœ¬ï¼ˆæœ«å°¾ä¼šé™„ä¸Š@core-js@3æ€ä¹ˆç”¨ï¼‰</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><ul><li><strong>æŒ‰éœ€æ–¹æ¡ˆ</strong></li></ul> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token function">yarn</span> <span class="token function">add</span> babel-loader@8 @babel/core @babel/preset-env @babel/plugin-transform-runtime -D
<span class="token function">yarn</span> <span class="token function">add</span> @babel/runtime-corejs2
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  presets<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">[</span>
      <span class="token string">'@babel/preset-env'</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        modules<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
        useBuiltIns<span class="token operator">:</span> <span class="token string">'false'</span> <span class="token comment">// é»˜è®¤ false, å¯é€‰ entry , usage</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">[</span>
      <span class="token string">'@babel/plugin-transform-runtime'</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        corejs<span class="token operator">:</span> <span class="token number">2</span> <span class="token comment">// æ¨è</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="babel7-4-åŠä»¥ä¸Š-æœ€æ–°æ›´æ–°"><a href="#babel7-4-åŠä»¥ä¸Š-æœ€æ–°æ›´æ–°" class="header-anchor">#</a> babel7.4 åŠä»¥ä¸Š æœ€æ–°æ›´æ–°</h2> <p>2019 å¹´ 3 æœˆ babel å®˜æ–¹æ›´æ–°äº†@babel/runtime-corejs3,å·²ç»æ”¯æŒäº†å®ä¾‹æ–¹æ³•çš„è½¬æ¢,è€Œä¸æ±¡æŸ“å…¨å±€å¯¹è±¡,ç°åœ¨å®Œç¾çš„é…ç½®å¦‚ä¸‹(å¯ç”¨äºåº“ä»¥åŠ web åº”ç”¨å¼€å‘):</p> <p>@babel/preset-env å°±æ˜¯<strong>é¢„è®¾</strong>,ä¹Ÿå°±æ˜¯æ’ä»¶çš„é›†åˆ(æ¯”å¦‚åŒ…æ‹¬@babel/plugin-transform-classes,@babel/plugin-transform-arrows ç­‰ç­‰),ä»¥æ–¹ä¾¿ç”¨æˆ·ä¸ç”¨ä¸€ä¸ªä¸€ä¸ªçš„å†™å…¥</p> <p>@babel/preset-env åŒ…æ‹¬äº†æ•´ä¸ª es6 çš„æ’ä»¶é›†åˆ, ä¸å¼€å¯ useBuiltIns å°†ä¼šé€šè¿‡ core-js æ¥å¼•å…¥è½¬æ¢å‡½æ•°, ä¹Ÿå°†ä¸æ±¡æŸ“å…¨å±€å¯¹è±¡ç­‰</p> <p>å¦‚æœå¼€å¯ useBuiltIns, é‚£ä¹ˆå€¼ä¸º entry éœ€è¦æ‰‹åŠ¨å¼•å…¥@babel/polyfill(æ ¹æ® .browselist æ¥åŠ å…¥å…¨å±€å«ç‰‡),å¦‚æœå€¼ä¸º usage,é‚£ä¹ˆä¸éœ€è¦å¼•å…¥@babel/polyfill,éœ€è¦å¼€å¯ corejs ä¸º 2 æˆ–è€… 3(æ ¹æ® .browselist ä»¥åŠæŒ‰éœ€å¼•å…¥å«ç‰‡)</p> <p>@babel/plugin-transform-runtime çš„ä½œç”¨ä»…ä»…æ˜¯é…åˆ@babel/runtime-corejs3 æ¥è§£å†³å¼•å…¥å¤šæ¬¡ helps å‡½æ•°çš„é—®é¢˜</p> <p>@babel/presets-env å¼€å¯ corejs:3 é€‰é¡¹, èƒ½å¤Ÿè‡ªåŠ¨è½¬æ¢ä»£ç ä½†æ˜¯ä¸èƒ½è§£å†³å¼•å…¥å¤šä¸ª helps çš„é—®é¢˜</p> <h3 id="å…³äº-corejs3-é…ç½®å‡çº§"><a href="#å…³äº-corejs3-é…ç½®å‡çº§" class="header-anchor">#</a> å…³äº corejs3 é…ç½®å‡çº§</h3> <p>@babel/preset-env æä¾›è½¬è¯‘ ES æ–°è¯­æ³•ï¼Œå‰©ä¸‹çš„äº‹æƒ…ï¼ˆå³ ES çš„æ–° APIï¼‰æ‰æ˜¯ @babel/polifill æˆ– @babel/runtime éœ€è¦å»è§£å†³çš„äº‹æƒ…</p> <p><strong>1.polyfill å«ç‰‡æ–¹æ¡ˆ</strong></p> <p>åœ¨ web åº”ç”¨ä¸­,æ»¡è¶³å…¨éƒ¨å«ç‰‡</p> <div class="language-sh extra-class"><pre class="language-sh"><code>// ä¾èµ–å®‰è£…
<span class="token function">yarn</span> <span class="token function">add</span> babel-loader@8 @babel/core @babel/preset-env -D
<span class="token function">yarn</span> <span class="token function">add</span> core-js regenerator-runtime
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  presets<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">[</span>
      <span class="token string">'@babel/preset-env'</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        modules<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment">// å¯¹ES6çš„æ¨¡å—æ–‡ä»¶ä¸åšè½¬åŒ–ï¼Œä»¥ä¾¿ä½¿ç”¨tree shakingã€sideEffectsç­‰</span>
        useBuiltIns<span class="token operator">:</span> <span class="token string">'entry'</span><span class="token punctuation">,</span> <span class="token comment">// browserslistç¯å¢ƒä¸æ”¯æŒçš„æ‰€æœ‰å«ç‰‡éƒ½å¯¼å…¥</span>
        <span class="token comment">// https://babeljs.io/docs/en/babel-preset-env#usebuiltins</span>
        <span class="token comment">// https://github.com/zloirock/core-js/blob/master/docs/2019-03-19-core-js-3-babel-and-a-look-into-the-future.md</span>
        corejs<span class="token operator">:</span> <span class="token punctuation">{</span>
          version<span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token comment">// ä½¿ç”¨core-js@3</span>
          proposals<span class="token operator">:</span> <span class="token boolean">true</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><div class="language-sh extra-class"><pre class="language-sh"><code>// å…¥å£çš„å˜åŒ–
<span class="token function">import</span> <span class="token string">&quot;core-js/stable&quot;</span>
<span class="token function">import</span> <span class="token string">&quot;regenerator-runtime/runtime&quot;</span>
</code></pre></div><p><strong>2. æŒ‰éœ€åŠ è½½æ–¹æ¡ˆ</strong></p> <p>åœ¨ç¬¬ä¸‰æ–¹åº“æˆ–è€…å·¥å…·çš„å¼€å‘ä¸­</p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token function">yarn</span> <span class="token function">add</span> babel-loader@8 @babel/core @babel/preset-env @babel/plugin-transform-runtime -D
<span class="token function">yarn</span> <span class="token function">add</span> @babel/runtime-corejs3
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  presets<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">[</span>
      <span class="token string">'@babel/preset-env'</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        modules<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment">//é»˜è®¤ å¯çœç•¥</span>
        useBuiltIns<span class="token operator">:</span> <span class="token string">'false'</span><span class="token punctuation">,</span> <span class="token comment">//é»˜è®¤ å¯çœç•¥  ==== æ­¤å¤„å¯ä»¥è€ƒè™‘è®¾ç½®ä¸º'usage'ä½¿æ‰“åŒ…ä½“ç§¯æ›´å°</span>
        targets<span class="token operator">:</span> <span class="token string">'ie &gt;= 8'</span><span class="token punctuation">,</span> <span class="token comment">// å¯çœç•¥ ä¸å†™è¯¥å­—æ®µå°†ä»¥.browselistä¸ºå‡†</span>
        corejs<span class="token operator">:</span> <span class="token boolean">false</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">[</span>
      <span class="token string">'@babel/plugin-transform-runtime'</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        corejs<span class="token operator">:</span> <span class="token punctuation">{</span>
          version<span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span>
          proposals<span class="token operator">:</span> <span class="token boolean">true</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        useESModules<span class="token operator">:</span> <span class="token boolean">true</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="babel-runtime-babel-runtime-corejs2-babel-runtime-corejs3-åŒºåˆ«"><a href="#babel-runtime-babel-runtime-corejs2-babel-runtime-corejs3-åŒºåˆ«" class="header-anchor">#</a> @babel/runtime &amp; @babel/runtime-corejs2 &amp; @babel/runtime-corejs3 åŒºåˆ«</h2> <p>è¿™ä¸‰ä¸ªåŒ…éƒ½æ˜¯ä¸€ä¸ªç³»åˆ—çš„åŒ…,åä¸¤è€…å¯ä»¥è§†ä¸ºæ˜¯å‰è€…çš„å‡çº§ç‰ˆ</p> <p>@babel/runtime åªåŒ…å«äº†åŸºæœ¬çš„è¯­æ³•è½¬æ¢ polyfill;</p> <p>@babel/runtime-corejs2 æ›´æ–°äº†ä¸€äº›åŠŸèƒ½å¢åŠ äº† api çš„æ”¯æŒ,ä½†æ˜¯æ²¡æ”¯æŒå®ä¾‹æ–¹æ³•çš„è½¬æ¢</p> <p>@babel/runtime-corejs3 å®Œå–„äº†ä¹‹å‰çš„å®ä¾‹æ–¹æ³•çš„æ”¯æŒ,æ˜¯åŒ…å«äº†å®Œæ•´çš„ polyfill ä¸æ±¡æŸ“å…¨å±€,ä¸€èˆ¬å¿…é¡»åŠ ä¸Š@babel/preset-env æ‰èƒ½è‡ªåŠ¨å¼•å…¥è¯¥åŒ…ä¸­çš„ polyfill åˆ°ä»£ç ä¸­,å¦åˆ™ä¸èƒ½è‡ªåŠ¨è½¬æ¢</p> <h2 id="npm-scope"><a href="#npm-scope" class="header-anchor">#</a> <a href="https://docs.npmjs.com/misc/scope" target="_blank" rel="noopener noreferrer">Npm-scope<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></h2> <p>ä½œç”¨:</p> <ol><li>ç›¸å…³åŒ…åˆ†ç»„åœ¨ä¸€èµ·,ä½“ç°åœ¨ node_modules å‡ºç°åœ¨ä¸€ä¸ªæ–‡ä»¶å¤¹é‡Œ</li> <li>ä½¿ç”¨@å¼€å¤´çš„ scope(èŒƒå›´åŒ…),åç»­éƒ½åªèƒ½ç”±  è¯¥è´¦å·å‘å¸ƒ  è¿™ä¸ªç³»åˆ—çš„èŒƒå›´åŒ…</li> <li>ä¸€èˆ¬ç”¨äºåŒºåˆ†ç¤¾åŒºçš„åŒ…è¿˜æ˜¯å®˜æ–¹çš„åŒ…</li></ol> <h2 id="å‚è€ƒæ–‡ä»¶"><a href="#å‚è€ƒæ–‡ä»¶" class="header-anchor">#</a> å‚è€ƒæ–‡ä»¶</h2> <ul><li>[é™„å½• 1]<a href="https://www.babeljs.cn/docs/babel-plugin-transform-runtime#polyfill" target="_blank" rel="noopener noreferrer">babel-plugin-transform-runtime#polyfill<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li>[é™„å½• 2]<a href="https://github.com/babel/babel/pull/7646" target="_blank" rel="noopener noreferrer">å…³äº corejs3<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li>[é™„å½• 3]<a href="https://segmentfault.com/a/1190000020237817" target="_blank" rel="noopener noreferrer">corejs3æ›´æ–°<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <hr></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">æ›´æ–°æ—¶é—´:</span> <span class="time">4/4/2021, 1:55:57 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      â†
      <a href="/blog/skills/Reactç”Ÿæ€ä¸­çš„è®¾è®¡ç†è®º.html" class="prev">
        React ä¸­çš„è®¾è®¡ç†è®º
      </a></span> <span class="next"><a href="/blog/skills/ç®€æ˜“æ‰“åŒ…å·¥å…·å®ç°.html">
        ç®€æ˜“æ‰“åŒ…å·¥å…·å®ç°
      </a>
      â†’
    </span></p></div> </main></div><div class="global-ui"><!----><!----></div></div>
    <script src="/blog/assets/js/app.9ee20128.js" defer></script><script src="/blog/assets/js/3.8c44ca0e.js" defer></script><script src="/blog/assets/js/17.45db52d8.js" defer></script><script src="/blog/assets/js/4.57980df9.js" defer></script>
  </body>
</html>
