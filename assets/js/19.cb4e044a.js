(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{396:function(a,t,s){"use strict";s.r(t);var r=s(27),n=Object(r.a)({},(function(){var a=this,t=a.$createElement,s=a._self._c||t;return s("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[s("h1",{attrs:{id:"crontab"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#crontab"}},[a._v("#")]),a._v(" Crontab")]),a._v(" "),s("h2",{attrs:{id:"作用"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#作用"}},[a._v("#")]),a._v(" 作用")]),a._v(" "),s("p",[s("strong",[a._v("crontab")]),a._v(" 命令，可以在固定的间隔时间执行指定的系统指令或 "),s("code",[a._v("shell script")]),a._v(" 脚本。时间间隔的单位可以是分钟、小时、日、月、周及以上的任意组合。这个命令非常适合周期性的日志分析或数据备份等工作")]),a._v(" "),s("p",[a._v("接下来的内容中将通过以下几个部分来讲解如何使用"),s("strong",[a._v("crontab")]),a._v("：")]),a._v(" "),s("ul",[s("li",[a._v("命令格式")]),a._v(" "),s("li",[a._v("命令参数")]),a._v(" "),s("li",[a._v("任务文件格式")]),a._v(" "),s("li",[a._v("macos 环境使用")]),a._v(" "),s("li",[a._v("使用实例")])]),a._v(" "),s("h2",{attrs:{id:"命令格式"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#命令格式"}},[a._v("#")]),a._v(" 命令格式")]),a._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("crontab")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("-u user"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("file")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("crontab")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("-u user"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v(" -e "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v(" -l "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v(" -r "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("\n")])])]),s("h2",{attrs:{id:"命令参数"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#命令参数"}},[a._v("#")]),a._v(" 命令参数")]),a._v(" "),s("ul",[s("li",[s("code",[a._v("-u")]),a._v(" user：用来设定某个用户的 crontab 服务；\nfile：file 是命令文件的名字,表示将 file 做为 crontab 的任务列表文件并载入 crontab。如果在命令行中没有指定这个文件，crontab 命令将接受标准输入（键盘）上键入的命令，并将它们载入 crontab。")]),a._v(" "),s("li",[s("code",[a._v("-e")]),a._v("：编辑某个用户的 crontab 文件内容。如果不指定用户，则表示编辑当前用户的 crontab 文件。")]),a._v(" "),s("li",[s("code",[a._v("-l")]),a._v("：显示某个用户的 crontab 文件内容，如果不指定用户，则表示显示当前用户的 crontab 文件内容。")]),a._v(" "),s("li",[s("code",[a._v("-r")]),a._v("：从/var/spool/cron 目录中删除某个用户的 crontab 文件，如果不指定用户，则默认删除当前用户的 crontab 文件。")]),a._v(" "),s("li",[s("code",[a._v("-i")]),a._v("：在删除用户的 crontab 文件时给确认提示。")])]),a._v(" "),s("h2",{attrs:{id:"任务文件格式"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#任务文件格式"}},[a._v("#")]),a._v(" 任务文件格式")]),a._v(" "),s("p",[a._v("分 时 日 月 星期 要运行的命令")]),a._v(" "),s("ul",[s("li",[a._v("第 1 列分钟 0 ～ 59")]),a._v(" "),s("li",[a._v("第 2 列小时 0 ～ 23（0 表示子夜）")]),a._v(" "),s("li",[a._v("第 3 列日 1 ～ 31")]),a._v(" "),s("li",[a._v("第 4 列月 1 ～ 12")]),a._v(" "),s("li",[a._v("第 5 列星期 0 ～ 7（0 和 7 表示星期天）")]),a._v(" "),s("li",[a._v("第 6 列要运行的命令")])]),a._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 示例")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("0")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("8")]),a._v("-12 * * * /root/backup.sh\n")])])]),s("h2",{attrs:{id:"macos-开启"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#macos-开启"}},[a._v("#")]),a._v(" macos 开启")]),a._v(" "),s("p",[a._v("在"),s("code",[a._v("macos")]),a._v("环境中首先要检查是否已经安装了"),s("code",[a._v("crontab")]),a._v(", 使用如下命令查看:")]),a._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 查看")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" launchctl list "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("grep")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("cron")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 如第一步不存在这新建crontab")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("touch")]),a._v(" /etc/crontab\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 编辑crontab任务")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("crontab")]),a._v(" -e\n")])])]),s("p",[a._v("同时, 在"),s("code",[a._v("macos")]),a._v("环境中常用的开启重启的命令:")]),a._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" /usr/sbin/cron start\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" /usr/sbin/cron restart\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" /usr/sbin/cron stop\n")])])]),s("h2",{attrs:{id:"使用实例"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#使用实例"}},[a._v("#")]),a._v(" 使用实例")]),a._v(" "),s("h3",{attrs:{id:"实例-1-每-1-分钟执行一次-mycommand"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#实例-1-每-1-分钟执行一次-mycommand"}},[a._v("#")]),a._v(" 实例 1：每 1 分钟执行一次 myCommand")]),a._v(" "),s("p",[s("code",[a._v("* * * * * myCommand")])]),a._v(" "),s("h3",{attrs:{id:"实例-2-每小时的第-3-和第-15-分钟执行"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#实例-2-每小时的第-3-和第-15-分钟执行"}},[a._v("#")]),a._v(" 实例 2：每小时的第 3 和第 15 分钟执行")]),a._v(" "),s("p",[s("code",[a._v("3,15 \\* \\* \\* _ myCommand")])]),a._v(" "),s("h3",{attrs:{id:"实例-3-在上午-8-点到-11-点的第-3-和第-15-分钟执行"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#实例-3-在上午-8-点到-11-点的第-3-和第-15-分钟执行"}},[a._v("#")]),a._v(" 实例 3：在上午 8 点到 11 点的第 3 和第 15 分钟执行")]),a._v(" "),s("p",[s("code",[a._v("3,15 8-11 _ \\* _ myCommand")])]),a._v(" "),s("h3",{attrs:{id:"实例-4-每隔两天的上午-8-点到-11-点的第-3-和第-15-分钟执行"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#实例-4-每隔两天的上午-8-点到-11-点的第-3-和第-15-分钟执行"}},[a._v("#")]),a._v(" 实例 4：每隔两天的上午 8 点到 11 点的第 3 和第 15 分钟执行")]),a._v(" "),s("p",[s("code",[a._v("3,15 8-11 _/2 \\* _ myCommand")])]),a._v(" "),s("h4",{attrs:{id:"实例-5-每周一上午-8-点到-11-点的第-3-和第-15-分钟执行"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#实例-5-每周一上午-8-点到-11-点的第-3-和第-15-分钟执行"}},[a._v("#")]),a._v(" 实例 5：每周一上午 8 点到 11 点的第 3 和第 15 分钟执行")]),a._v(" "),s("p",[s("code",[a._v("3,15 8-11 _ _ 1 myCommand")])]),a._v(" "),s("h4",{attrs:{id:"实例-6-每晚的-21-30-重启-smb"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#实例-6-每晚的-21-30-重启-smb"}},[a._v("#")]),a._v(" 实例 6：每晚的 21:30 重启 smb")]),a._v(" "),s("p",[s("code",[a._v("30 21 _ \\* \\* /etc/init.d/smb restart")])])])}),[],!1,null,null,null);t.default=n.exports}}]);